"use strict";(self.webpackChunkcircle=self.webpackChunkcircle||[]).push([[461],{1269:function(n,e,c){c.d(e,{Z:function(){return _}});var i="index_info__ZJIn6",s="index_defaultStyle__+aVsA",a="index_name__DW1g1",t="index_all__JUGKz",o="index_online__pBQbe",l="index_offline__nm8iG",r=c(2791),d=c(184),u=function(n){var e=n.online,c=n.name,r=n.showOnline;return(0,d.jsxs)("div",{className:i,children:[(0,d.jsx)("span",{className:"".concat(s," ").concat(r?a:t),children:c}),r&&(0,d.jsx)("span",{className:"".concat(o," ").concat(e?null:l),children:e?"\u5728\u7ebf":"\u79bb\u7ebf"})]})},_=(0,r.memo)(u)},149:function(n,e,c){c.d(e,{Z:function(){return v}});var i=c(9439),s=c(1269),a=c(2718),t="index_contactsItem__td4Mf",o="index_selected__gwyZ5",l="index_contactsItem2__cp+N3",r="index_mainInfo__5wuox",d="index_avatar__jTpQV",u="index_type2__rGTXq",_="index_basicInfo__B8XcK",x="index_operation__-G2DM",f=c(2791),h=c(184),p=function(n){var e=n.info,c=n.uid,p=n.operationReactNode,v=n.handlerHover,m=n.borderType,j=n.basicShowOnline,N=n.size,C=(0,f.useRef)(),Z=(0,f.useState)(!1),I=(0,i.Z)(Z,2),g=I[0],k=I[1];return(0,f.useEffect)((function(){var n=function(n){var e=C.current;e&&(e.contains(n.target)?k(!0):k(!1))};return document.addEventListener("click",n),function(){document.removeEventListener("click",n)}}),[]),(0,h.jsxs)("div",{className:"memberItem ".concat(t," ").concat(g?o:2===m?l:null," "),onMouseOver:function(){v&&v(null===e||void 0===e?void 0:e.uid)},onMouseLeave:function(){v&&v("")},children:[(0,h.jsx)("div",{className:d,children:(0,h.jsx)(a.Z,{size:N,name:(null===e||void 0===e?void 0:e.nickname)||c,src:null===e||void 0===e?void 0:e.avatarurl,online:null===e||void 0===e?void 0:e.online})}),(0,h.jsxs)("div",{className:"".concat(r," ").concat(2===m?u:null),children:[(0,h.jsx)("div",{className:_,children:(0,h.jsx)(s.Z,{name:(null===e||void 0===e?void 0:e.nickname)||c,src:null===e||void 0===e?void 0:e.avatarurl,online:null===e||void 0===e?void 0:e.online,showOnline:j})}),(0,h.jsx)("div",{className:x,ref:C,children:p})]})]})},v=(0,f.memo)(p)},7461:function(n,e,c){c.r(e),c.d(e,{default:function(){return dn}});var i=c(3433),s=c(9439),a=c(2791),t="index_main__tkdxB",o="index_top__2-I3b",l="index_left__FScFa",r="index_contactsText__FnqNh",d="index_buttonCon__KgCBc",u="index_button__+k2qj",_="index_new__j6I5w",x="index_selected__xpbSB",f="index_rightCon__elFjq",h="index_right__8XmNI",p="index_addIcon__J9Z6a",v="index_addText__5hG+J",m="index_content__i9a1y",j="index_noApply__Z9qzG",N="index_noApplyIcon__F2iYZ",C="index_noApplyText__L50FC",Z="index_addContact__fjKjs",I="index_dialog__WoUfV",g="index_title__2kaSH",k="index_titleClose__oVB1V",y="index_searchId__fpLLN",B="index_searchInput2__heQ4f",S="index_searchButton__CQouB",b="index_tips__1EiSc",L="index_applyOperation__ojN+u",w="index_acceptButton__w5yMA",D="index_operation__yXoA2",U="index_chat__AwVsf",z="index_delete__caVSh",O="index_chatIcon__soi3K",F="index_deleteIcon__BZs6s",R="index_focus__FIUsT",q="index_searchResultPop__Z-2ZH",A="index_searchCon__6UizV",E="index_hasBorder__f-gKW",H="index_noResult__-7Hck",T="index_closeIconCon__njz3u",V="index_searchIcon__S4uOT",P="index_searchInput__ZEPbe",G="index_searchResult__aX5qV",M="index_searchResultList__k2Yax",K=c(8687),X=c(7411),J=c(8406),Q=c(149),W=c(6014),$=c(3695),Y=c(3020),nn=c(6573),en=c(7382),cn=c(1091),sn=c(6871),an=c(184),tn=function(n,e){return(0,an.jsx)(W.Z,{onClick:function(){e(n)},items:[{key:"1",label:(0,an.jsxs)("div",{className:"circleDropItem",children:[(0,an.jsx)(cn.Z,{name:"trash",size:"22px",iconClass:"circleDropMenuIcon"}),(0,an.jsx)("span",{className:"circleDropMenuOp",children:"\u5220\u9664\u597d\u53cb"})]})}]})},on=function(n){return(0,an.jsxs)("div",{className:j,children:[(0,an.jsx)("div",{className:N}),(0,an.jsx)("p",{className:C,children:n})]})},ln=function(n){var e=n.searchList,c=n.onChat,i=n.onDelete,s=n.hoverSearchUid,a=n.onHover,t=n.appUserInfo,o=n.visible;return(0,an.jsx)("div",{className:G,children:e.length>0?(0,an.jsx)("div",{className:M,children:e.map((function(n){return(0,an.jsx)(rn,{source:"search",visible:o,uid:n,userInfo:t[n],onChat:c,onDelete:i,hoverSearchUid:s,onHoverFn:a},n)}))}):(0,an.jsx)("div",{className:H,children:"\u6ca1\u6709\u7ed3\u679c"})})},rn=function(n){var e=n.source,c=n.uid,i=n.userInfo,s=n.onChat,t=n.onDelete,o=n.hoverContactUid,l=n.hoverSearchUid,r=n.onHoverFn,d=(0,a.createRef)();return(0,an.jsx)(Q.Z,{info:i,uid:c,handlerHover:r,basicShowOnline:!0,operationReactNode:(0,an.jsxs)("div",{className:D,ref:d,children:[(0,an.jsx)(nn.Z,{title:"\u6d88\u606f",overlayClassName:"toolTip",children:(0,an.jsx)("span",{className:"opBg ".concat(U," ").concat(o===c&&"list"===e||l===c&&"search"===e?R:null),onClick:function(){return s(c)},children:(0,an.jsx)("span",{className:O,children:(0,an.jsx)(cn.Z,{name:"message_retangle",size:"22px",iconClass:"opIcon"})})})}),(0,an.jsx)(en.Z,{overlay:tn(c,t),placement:"bottomRight",trigger:["click"],overlayClassName:"circleDropDown",getPopupContainer:function(){return d.current?d.current:document.body},children:(0,an.jsx)("span",{className:"opBg ".concat(z," ").concat(o===c&&"list"===e||l===c&&"search"===e?R:null),children:(0,an.jsx)("span",{className:F,children:(0,an.jsx)(cn.Z,{name:"ellipsis",size:"22px",iconClass:"opIcon"})})})})]})},c)},dn=(0,a.memo)((0,K.$j)((function(n){var e=n.app,c=n.contact;return{appUserInfo:e.appUserInfo,applyInfo:c.applyInfo,contactsList:c.contactsList}}),(function(n){return{setContactsList:function(e){return n({type:"contact/setContactsList",payload:e})},setApplyInfo:function(e){return n({type:"contact/setApplyInfo",payload:e})}}}))((function(n){var e=n.appUserInfo,c=n.contactsList,j=n.applyInfo,N=n.setContactsList,C=n.setApplyInfo,D=(0,sn.s0)();(0,a.useEffect)((function(){c.length>0||X.Z.conn.getContacts().then((function(n){n.data.length>0&&((0,J.mZ)(n.data),N(n.data))}))}),[]);var U=(0,a.useState)("online"),z=(0,s.Z)(U,2),O=z[0],R=z[1],H=(0,a.useState)([]),G=(0,s.Z)(H,2),M=G[0],K=G[1];(0,a.useEffect)((function(){if("online"===O){var n=c.length>0?c.filter((function(n){var c;return 1===(null===(c=e[n])||void 0===c?void 0:c.online)})):[];K(n)}else"all"===O&&K(c)}),[e,c,O]);var W=(0,a.useState)(""),nn=(0,s.Z)(W,2),en=nn[0],tn=nn[1],dn=(0,a.useState)({}),un=(0,s.Z)(dn,2),_n=un[0],xn=un[1];(0,a.useEffect)((function(){if(""!==en.replace(/(^\s*)|(\s*$)/g,"")){if(c.length>0){var n=[];c.forEach((function(c){var i;((null===(i=e[c])||void 0===i?void 0:i.nickname.toLowerCase().indexOf(en.toLocaleLowerCase()))>-1||c.toLocaleLowerCase().indexOf(en.toLocaleLowerCase())>-1)&&n.push(c)})),xn(n)}""!==en&&mn(!0)}else xn([]),mn(!1)}),[e,c,en]);var fn=(0,a.useState)(!1),hn=(0,s.Z)(fn,2),pn=hn[0],vn=hn[1],mn=function(n){n?""!==en&&vn(n):vn(n)},jn=(0,a.useState)(!1),Nn=(0,s.Z)(jn,2),Cn=Nn[0],Zn=Nn[1],In=(0,a.useRef)();(0,a.useEffect)((function(){Cn&&In&&In.current.focus()}),[Cn]);var gn=(0,a.useState)(""),kn=(0,s.Z)(gn,2),yn=kn[0],Bn=kn[1],Sn=(0,a.useState)(!1),bn=(0,s.Z)(Sn,2),Ln=bn[0],wn=bn[1],Dn=function(n){D("/main/contacts/chat/".concat(n))},Un=function(n){X.Z.conn.deleteContact(n)},zn=function(n,e){if("accept"===n)X.Z.conn.acceptContactInvite(e);else{X.Z.conn.declineContactInvite(e);var c=(0,i.Z)(j),s=c.indexOf(e);s>-1&&(c.splice(s,1),C(c)),$.ZP.warn({content:"\u5df2\u62d2\u7edd\u7533\u8bf7"})}},On=(0,a.useState)(""),Fn=(0,s.Z)(On,2),Rn=Fn[0],qn=Fn[1],An=function(n){qn(n)},En=(0,a.useState)(""),Hn=(0,s.Z)(En,2),Tn=Hn[0],Vn=Hn[1],Pn=(0,a.useState)(!1),Gn=(0,s.Z)(Pn,2),Mn=Gn[0],Kn=Gn[1],Xn=function(n){Kn(n)};return(0,an.jsxs)("div",{className:t,children:[(0,an.jsxs)("div",{className:o,children:[(0,an.jsxs)("div",{className:l,children:[(0,an.jsx)(cn.Z,{name:"person_2",size:"26px"}),(0,an.jsx)("span",{className:r,children:"\u6211\u7684\u597d\u53cb"}),(0,an.jsxs)("div",{className:d,children:[(0,an.jsx)("div",{className:"".concat(u," ").concat("online"===O?x:null),onClick:function(){R("online")},children:"\u5728\u7ebf"}),(0,an.jsx)("div",{className:"".concat(u," ").concat("all"===O?x:null),onClick:function(){R("all")},children:"\u5168\u90e8"}),(0,an.jsxs)("div",{className:"".concat(u," ").concat("request"===O?x:null),onClick:function(){R("request")},children:["\u597d\u53cb\u7533\u8bf7",j.length>0&&"request"!==O&&(0,an.jsx)("span",{className:_})]})]}),(0,an.jsx)(Y.Z,{overlayClassName:q,placement:"bottomLeft",trigger:"click",visible:pn,onVisibleChange:mn,content:(0,an.jsx)(ln,{visible:pn,appUserInfo:e,searchList:_n,hoverSearchUid:Tn,onHover:function(n){Vn(n)},onChat:Dn,onDelete:Un}),children:(0,an.jsxs)("div",{className:"".concat(A," ").concat(Mn?E:null),children:[(0,an.jsx)(cn.Z,{name:"magnify",size:"18px",color:"#BDBDBD",iconClass:V}),(0,an.jsx)("input",{className:P,value:en,onChange:function(n){return function(n){tn(n.target.value)}(n)},placeholder:"\u641c\u7d22\u6211\u7684\u597d\u53cb",onFocus:function(){Xn(!0)},onBlur:function(){Xn(!1)}}),""!==en&&(0,an.jsx)("span",{className:T,onClick:function(n){n.stopPropagation(),tn("")},children:(0,an.jsx)(cn.Z,{name:"xmark_in_circle",size:"20px",color:"#BDBDBD",iconClass:F})})]})})]}),(0,an.jsx)("div",{className:f,children:(0,an.jsxs)("div",{className:"circleBtn ".concat(h),onClick:function(){return Zn(!0)},children:[(0,an.jsx)("span",{className:p,children:(0,an.jsx)(cn.Z,{name:"add_in_circle",size:"22px"})}),(0,an.jsx)("span",{className:v,children:"\u6dfb\u52a0\u597d\u53cb"})]})})]}),"request"===O?(0,an.jsx)("div",{className:m,children:j.length>0?j.map((function(n){return(0,an.jsx)(Q.Z,{info:e[n],uid:n,operationReactNode:(0,an.jsxs)("div",{className:L,children:[(0,an.jsx)("div",{className:"circleBtn66 circleBtnGray",onClick:function(){zn("refuse",n)},children:"\u62d2\u7edd"}),(0,an.jsx)("div",{className:"circleBtn66 circleBtn ".concat(w),onClick:function(){zn("accept",n)},children:"\u63a5\u53d7"})]})},n)})):on("\u6ca1\u6709\u5f85\u5904\u7406\u7684\u597d\u53cb\u7533\u8bf7")}):(0,an.jsx)("div",{className:m,children:M.length>0?M.map((function(n){return(0,an.jsx)(rn,{source:"list",visible:pn,uid:n,userInfo:e[n],onChat:Dn,onDelete:Un,hoverContactUid:Rn,onHoverFn:An},n)})):on("\u60a8\u8fd8\u6ca1\u6709\u597d\u53cb")}),Cn&&(0,an.jsx)("div",{className:Z,children:(0,an.jsxs)("div",{className:I,children:[(0,an.jsxs)("div",{className:g,children:[(0,an.jsx)("span",{children:"\u6dfb\u52a0\u597d\u53cb"}),(0,an.jsx)("span",{className:k,onClick:function(){return Zn(!1)},children:(0,an.jsx)(cn.Z,{name:"xmark",color:"#c7c7c7",size:"18px"})})]}),(0,an.jsxs)("div",{className:y,children:[(0,an.jsx)("input",{ref:In,className:B,value:yn,onChange:function(n){return function(n){Bn(n.target.value)}(n)},placeholder:"\u8f93\u5165\u73af\u4fe1ID"}),(0,an.jsx)("div",{className:"circleBtn106 circleBtn ".concat(S,"  ").concat(""===yn?"disable":null),onClick:function(){if(""!==yn)if(/^1\d{10}$/.test(yn)){if(yn===X.Z.conn.user)return $.ZP.warn({content:"\u4e0d\u53ef\u4ee5\u6dfb\u52a0\u81ea\u5df1\u4e3a\u597d\u53cb\u54e6"}),void Bn("");if(c.indexOf(yn)>-1)return $.ZP.warn({content:"\u4e0d\u80fd\u91cd\u590d\u6dfb\u52a0\u597d\u53cb\u54e6"}),void Bn("");X.Z.conn.addContact(yn),Bn(""),Cn&&In&&In.current.focus(),wn(!0),setTimeout((function(){wn(!1)}),2e3)}else $.ZP.warn({content:"\u8bf7\u8f93\u5165\u5408\u6cd5\u624b\u673a\u53f7\uff01"})},children:"\u53d1\u9001\u597d\u53cb\u8bf7\u6c42"})]}),Ln&&(0,an.jsx)("div",{className:b,children:"\u60a8\u7684\u597d\u53cb\u8bf7\u6c42\u5df2\u53d1\u9001"})]})})]})})))}}]);
//# sourceMappingURL=461.ddf5722d.chunk.js.map