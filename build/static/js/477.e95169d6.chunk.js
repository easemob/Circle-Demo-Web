/*! For license information please see 477.e95169d6.chunk.js.LICENSE.txt */
(self.webpackChunkcircle=self.webpackChunkcircle||[]).push([[477],{6658:function(e,t,n){"use strict";n.d(t,{Z:function(){return we}});var r=n(2791),o=n(5873),i=n(9553),a=n(3486),c=n(1002),s=n(4942),u=n(7462),l=n(9439),d=n(1694),f=n.n(d),h=n(3433),p=n(9613),m=n.n(p),g=n(5179),v=n(5987),w=n(1413),y=n(1354),b=r.createContext({min:0,max:0,direction:"ltr",step:1,includedStart:0,includedEnd:0,tabIndex:0});function C(e,t,n){return(e-t)/(n-t)}function S(e,t,n,r){var o=C(t,n,r),i={};switch(e){case"rtl":i.right="".concat(100*o,"%"),i.transform="translateX(50%)";break;case"btt":i.bottom="".concat(100*o,"%"),i.transform="translateY(50%)";break;case"ttb":i.top="".concat(100*o,"%"),i.transform="translateY(-50%)";break;default:i.left="".concat(100*o,"%"),i.transform="translateX(-50%)"}return i}function x(e,t){return Array.isArray(e)?e[t]:e}var E=["prefixCls","value","valueIndex","onStartMove","style","render","dragging","onOffsetChange"];var P=r.forwardRef((function(e,t){var n,o,i=e.prefixCls,a=e.value,c=e.valueIndex,l=e.onStartMove,d=e.style,h=e.render,p=e.dragging,m=e.onOffsetChange,g=(0,v.Z)(e,E),C=r.useContext(b),P=C.min,M=C.max,R=C.direction,I=C.disabled,T=C.range,D=C.tabIndex,O=C.ariaLabelForHandle,L=C.ariaLabelledByForHandle,k=C.ariaValueTextFormatterForHandle,F="".concat(i,"-handle"),A=function(e){I||l(e,c)},z=S(R,a,P,M),Z=r.createElement("div",(0,u.Z)({ref:t,className:f()(F,(n={},(0,s.Z)(n,"".concat(F,"-").concat(c+1),T),(0,s.Z)(n,"".concat(F,"-dragging"),p),n)),style:(0,w.Z)((0,w.Z)({},z),d),onMouseDown:A,onTouchStart:A,onKeyDown:function(e){if(!I){var t=null;switch(e.which||e.keyCode){case y.Z.LEFT:t="ltr"===R||"btt"===R?-1:1;break;case y.Z.RIGHT:t="ltr"===R||"btt"===R?1:-1;break;case y.Z.UP:t="ttb"!==R?1:-1;break;case y.Z.DOWN:t="ttb"!==R?-1:1;break;case y.Z.HOME:t="min";break;case y.Z.END:t="max";break;case y.Z.PAGE_UP:t=2;break;case y.Z.PAGE_DOWN:t=-2}null!==t&&(e.preventDefault(),m(t,c))}},tabIndex:I?null:x(D,c),role:"slider","aria-valuemin":P,"aria-valuemax":M,"aria-valuenow":a,"aria-disabled":I,"aria-label":x(O,c),"aria-labelledby":x(L,c),"aria-valuetext":null===(o=x(k,c))||void 0===o?void 0:o(a)},g));return h&&(Z=h(Z,{index:c,prefixCls:i,value:a,dragging:p})),Z})),M=["prefixCls","style","onStartMove","onOffsetChange","values","handleRender","draggingIndex"];var R=r.forwardRef((function(e,t){var n=e.prefixCls,o=e.style,i=e.onStartMove,a=e.onOffsetChange,c=e.values,s=e.handleRender,l=e.draggingIndex,d=(0,v.Z)(e,M),f=r.useRef({});return r.useImperativeHandle(t,(function(){return{focus:function(e){var t;null===(t=f.current[e])||void 0===t||t.focus()}}})),r.createElement(r.Fragment,null,c.map((function(e,t){return r.createElement(P,(0,u.Z)({ref:function(e){e?f.current[t]=e:delete f.current[t]},dragging:l===t,prefixCls:n,style:x(o,t),key:t,value:e,valueIndex:t,onStartMove:i,onOffsetChange:a,render:s},d))})))}));function I(e){var t="touches"in e?e.touches[0]:e;return{pageX:t.pageX,pageY:t.pageY}}function T(e){var t=e.prefixCls,n=e.style,o=e.start,i=e.end,a=e.index,c=e.onStartMove,s=r.useContext(b),u=s.direction,l=s.min,d=s.max,h=s.disabled,p=s.range,m="".concat(t,"-track"),g=C(o,l,d),v=C(i,l,d),y=function(e){!h&&c&&c(e,-1)},S={};switch(u){case"rtl":S.right="".concat(100*g,"%"),S.width="".concat(100*v-100*g,"%");break;case"btt":S.bottom="".concat(100*g,"%"),S.height="".concat(100*v-100*g,"%");break;case"ttb":S.top="".concat(100*g,"%"),S.height="".concat(100*v-100*g,"%");break;default:S.left="".concat(100*g,"%"),S.width="".concat(100*v-100*g,"%")}return r.createElement("div",{className:f()(m,p&&"".concat(m,"-").concat(a+1)),style:(0,w.Z)((0,w.Z)({},S),n),onMouseDown:y,onTouchStart:y})}function D(e){var t=e.prefixCls,n=e.style,o=e.values,i=e.startPoint,a=e.onStartMove,c=r.useContext(b),s=c.included,u=c.range,l=c.min,d=r.useMemo((function(){if(!u){if(0===o.length)return[];var e=null!==i&&void 0!==i?i:l,t=o[0];return[{start:Math.min(e,t),end:Math.max(e,t)}]}for(var n=[],r=0;r<o.length-1;r+=1)n.push({start:o[r],end:o[r+1]});return n}),[o,u,i,l]);return s?d.map((function(e,o){var i=e.start,c=e.end;return r.createElement(T,{index:o,prefixCls:t,style:x(n,o),start:i,end:c,key:o,onStartMove:a})})):null}function O(e){var t=e.prefixCls,n=e.style,o=e.children,i=e.value,a=e.onClick,c=r.useContext(b),u=c.min,l=c.max,d=c.direction,h=c.includedStart,p=c.includedEnd,m=c.included,g="".concat(t,"-text"),v=S(d,i,u,l);return r.createElement("span",{className:f()(g,(0,s.Z)({},"".concat(g,"-active"),m&&h<=i&&i<=p)),style:(0,w.Z)((0,w.Z)({},v),n),onMouseDown:function(e){e.stopPropagation()},onClick:function(){a(i)}},o)}function L(e){var t=e.prefixCls,n=e.marks,o=e.onClick,i="".concat(t,"-mark");return n.length?r.createElement("div",{className:i},n.map((function(e){var t=e.value,n=e.style,a=e.label;return r.createElement(O,{key:t,prefixCls:i,style:n,value:t,onClick:o},a)}))):null}function k(e){var t=e.prefixCls,n=e.value,o=e.style,i=e.activeStyle,a=r.useContext(b),c=a.min,u=a.max,l=a.direction,d=a.included,h=a.includedStart,p=a.includedEnd,m="".concat(t,"-dot"),g=d&&h<=n&&n<=p,v=(0,w.Z)((0,w.Z)({},S(l,n,c,u)),"function"===typeof o?o(n):o);return g&&(v=(0,w.Z)((0,w.Z)({},v),"function"===typeof i?i(n):i)),r.createElement("span",{className:f()(m,(0,s.Z)({},"".concat(m,"-active"),g)),style:v})}function F(e){var t=e.prefixCls,n=e.marks,o=e.dots,i=e.style,a=e.activeStyle,c=r.useContext(b),s=c.min,u=c.max,l=c.step,d=r.useMemo((function(){var e=new Set;if(n.forEach((function(t){e.add(t.value)})),o&&null!==l)for(var t=s;t<=u;)e.add(t),t+=l;return Array.from(e)}),[s,u,l,o,n]);return r.createElement("div",{className:"".concat(t,"-step")},d.map((function(e){return r.createElement(k,{prefixCls:t,key:e,value:e,style:i,activeStyle:a})})))}n(632);var A=r.forwardRef((function(e,t){var n,o=e.prefixCls,i=void 0===o?"rc-slider":o,a=e.className,u=e.style,d=e.disabled,p=void 0!==d&&d,v=e.autoFocus,w=e.onFocus,y=e.onBlur,C=e.min,S=void 0===C?0:C,x=e.max,E=void 0===x?100:x,P=e.step,M=void 0===P?1:P,T=e.value,O=e.defaultValue,k=e.range,A=e.count,z=e.onChange,Z=e.onBeforeChange,_=e.onAfterChange,U=e.allowCross,N=void 0===U||U,j=e.pushable,G=void 0!==j&&j,W=e.draggableTrack,B=e.reverse,H=e.vertical,V=e.included,X=void 0===V||V,q=e.startPoint,Y=e.trackStyle,Q=e.handleStyle,K=e.railStyle,J=e.dotStyle,$=e.activeDotStyle,ee=e.marks,te=e.dots,ne=e.handleRender,re=e.tabIndex,oe=void 0===re?0:re,ie=e.ariaLabelForHandle,ae=e.ariaLabelledByForHandle,ce=e.ariaValueTextFormatterForHandle,se=r.useRef(),ue=r.useRef(),le=r.useMemo((function(){return H?B?"ttb":"btt":B?"rtl":"ltr"}),[B,H]),de=r.useMemo((function(){return isFinite(S)?S:0}),[S]),fe=r.useMemo((function(){return isFinite(E)?E:100}),[E]),he=r.useMemo((function(){return null!==M&&M<=0?1:M}),[M]),pe=r.useMemo((function(){return!0===G?he:G>=0&&G}),[G,he]),me=r.useMemo((function(){return Object.keys(ee||{}).map((function(e){var t=ee[e],n={value:Number(e)};return t&&"object"===(0,c.Z)(t)&&!r.isValidElement(t)&&("label"in t||"style"in t)?(n.style=t.style,n.label=t.label):n.label=t,n})).filter((function(e){var t=e.label;return t||"number"===typeof t})).sort((function(e,t){return e.value-t.value}))}),[ee]),ge=function(e,t,n,o,i,a){var c=r.useCallback((function(n){var r=isFinite(n)?n:e;return r=Math.min(t,n),Math.max(e,r)}),[e,t]),s=r.useCallback((function(r){if(null!==n){var o=e+Math.round((c(r)-e)/n)*n,i=function(e){return(String(e).split(".")[1]||"").length},a=Math.max(i(n),i(t),i(e)),s=Number(o.toFixed(a));return e<=s&&s<=t?s:null}return null}),[n,e,t,c]),u=r.useCallback((function(r){var i=c(r),a=o.map((function(e){return e.value}));null!==n&&a.push(s(r)),a.push(e,t);var u=a[0],l=t-e;return a.forEach((function(e){var t=Math.abs(i-e);t<=l&&(u=e,l=t)})),u}),[e,t,o,n,c,s]),l=function r(i,a,c){var u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"unit";if("number"===typeof a){var l,d=i[c],f=d+a,p=[];o.forEach((function(e){p.push(e.value)})),p.push(e,t),p.push(s(d));var m=a>0?1:-1;"unit"===u?p.push(s(d+m*n)):p.push(s(f)),p=p.filter((function(e){return null!==e})).filter((function(e){return a<0?e<=d:e>=d})),"unit"===u&&(p=p.filter((function(e){return e!==d})));var g="unit"===u?d:f;l=p[0];var v=Math.abs(l-g);if(p.forEach((function(e){var t=Math.abs(e-g);t<v&&(l=e,v=t)})),void 0===l)return a<0?e:t;if("dist"===u)return l;if(Math.abs(a)>1){var w=(0,h.Z)(i);return w[c]=l,r(w,a-m,c,u)}return l}return"min"===a?e:"max"===a?t:void 0},d=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"unit",o=e[n],i=l(e,t,n,r);return{value:i,changed:i!==o}},f=function(e){return null===a&&0===e||"number"===typeof a&&e<a};return[u,function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"unit",o=e.map(u),c=o[n],s=l(o,t,n,r);if(o[n]=s,!1===i){var h=a||0;n>0&&o[n-1]!==c&&(o[n]=Math.max(o[n],o[n-1]+h)),n<o.length-1&&o[n+1]!==c&&(o[n]=Math.min(o[n],o[n+1]-h))}else if("number"===typeof a||null===a){for(var p=n+1;p<o.length;p+=1)for(var m=!0;f(o[p]-o[p-1])&&m;){var g=d(o,1,p);o[p]=g.value,m=g.changed}for(var v=n;v>0;v-=1)for(var w=!0;f(o[v]-o[v-1])&&w;){var y=d(o,-1,v-1);o[v-1]=y.value,w=y.changed}for(var b=o.length-1;b>0;b-=1)for(var C=!0;f(o[b]-o[b-1])&&C;){var S=d(o,-1,b-1);o[b-1]=S.value,C=S.changed}for(var x=0;x<o.length-1;x+=1)for(var E=!0;f(o[x+1]-o[x])&&E;){var P=d(o,1,x+1);o[x+1]=P.value,E=P.changed}}return{value:o[n],values:o}}]}(de,fe,he,me,N,pe),ve=(0,l.Z)(ge,2),we=ve[0],ye=ve[1],be=(0,g.Z)(O,{value:T}),Ce=(0,l.Z)(be,2),Se=Ce[0],xe=Ce[1],Ee=r.useMemo((function(){var e=null===Se||void 0===Se?[]:Array.isArray(Se)?Se:[Se],t=(0,l.Z)(e,1)[0],n=null===Se?[]:[void 0===t?de:t];if(k){if(n=(0,h.Z)(e),A||void 0===Se){var r=A>=0?A+1:2;for(n=n.slice(0,r);n.length<r;){var o;n.push(null!==(o=n[n.length-1])&&void 0!==o?o:de)}}n.sort((function(e,t){return e-t}))}return n.forEach((function(e,t){n[t]=we(e)})),n}),[Se,k,de,A,we]),Pe=r.useRef(Ee);Pe.current=Ee;var Me=function(e){return k?e:e[0]},Re=function(e){var t=(0,h.Z)(e).sort((function(e,t){return e-t}));z&&!m()(t,Pe.current)&&z(Me(t)),xe(t)},Ie=function(e){if(!p){var t=0,n=fe-de;Ee.forEach((function(r,o){var i=Math.abs(e-r);i<=n&&(n=i,t=o)}));var r=(0,h.Z)(Ee);r[t]=e,k&&!Ee.length&&void 0===A&&r.push(e),null===Z||void 0===Z||Z(Me(r)),Re(r),null===_||void 0===_||_(Me(r))}},Te=r.useState(null),De=(0,l.Z)(Te,2),Oe=De[0],Le=De[1];r.useEffect((function(){if(null!==Oe){var e=Ee.indexOf(Oe);e>=0&&se.current.focus(e)}Le(null)}),[Oe]);var ke=r.useMemo((function(){return(!W||null!==he)&&W}),[W,he]),Fe=function(e,t,n,o,i,a,c,s,u){var d=r.useState(null),f=(0,l.Z)(d,2),p=f[0],m=f[1],g=r.useState(-1),v=(0,l.Z)(g,2),w=v[0],y=v[1],b=r.useState(n),C=(0,l.Z)(b,2),S=C[0],x=C[1],E=r.useState(n),P=(0,l.Z)(E,2),M=P[0],R=P[1],T=r.useRef(null),D=r.useRef(null);r.useEffect((function(){-1===w&&x(n)}),[n,w]),r.useEffect((function(){return function(){document.removeEventListener("mousemove",T.current),document.removeEventListener("mouseup",D.current),document.removeEventListener("touchmove",T.current),document.removeEventListener("touchend",D.current)}}),[]);var O=function(e,t){S.some((function(t,n){return t!==e[n]}))&&(void 0!==t&&m(t),x(e),c(e))},L=function(e,t){if(-1===e){var n=M[0],r=M[M.length-1],c=o-n,s=i-r,l=t*(i-o);l=Math.max(l,c),l=Math.min(l,s);var d=a(n+l);l=d-n;var f=M.map((function(e){return e+l}));O(f)}else{var p=(i-o)*t,m=(0,h.Z)(S);m[e]=M[e];var g=u(m,p,e,"dist");O(g.values,g.value)}},k=r.useRef(L);k.current=L;var F=r.useMemo((function(){var e=(0,h.Z)(n).sort((function(e,t){return e-t})),t=(0,h.Z)(S).sort((function(e,t){return e-t}));return e.every((function(e,n){return e===t[n]}))?S:n}),[n,S]);return[w,p,F,function(r,o){r.stopPropagation();var i=n[o];y(o),m(i),R(n);var a=I(r),c=a.pageX,u=a.pageY,l=function(n){n.preventDefault();var r,i=I(n),a=i.pageX,s=i.pageY,l=a-c,d=s-u,f=e.current.getBoundingClientRect(),h=f.width,p=f.height;switch(t){case"btt":r=-d/p;break;case"ttb":r=d/p;break;case"rtl":r=-l/h;break;default:r=l/h}k.current(o,r)},d=function e(t){t.preventDefault(),document.removeEventListener("mouseup",e),document.removeEventListener("mousemove",l),document.removeEventListener("touchend",e),document.removeEventListener("touchmove",l),T.current=null,D.current=null,y(-1),s()};document.addEventListener("mouseup",d),document.addEventListener("mousemove",l),document.addEventListener("touchend",d),document.addEventListener("touchmove",l),T.current=l,D.current=d}]}(ue,le,Ee,de,fe,we,Re,(function(){null===_||void 0===_||_(Me(Pe.current))}),ye),Ae=(0,l.Z)(Fe,4),ze=Ae[0],Ze=Ae[1],_e=Ae[2],Ue=Ae[3],Ne=function(e,t){Ue(e,t),null===Z||void 0===Z||Z(Me(Pe.current))},je=-1!==ze;r.useEffect((function(){if(!je){var e=Ee.lastIndexOf(Ze);se.current.focus(e)}}),[je]);var Ge=r.useMemo((function(){return(0,h.Z)(_e).sort((function(e,t){return e-t}))}),[_e]),We=r.useMemo((function(){return k?[Ge[0],Ge[Ge.length-1]]:[de,Ge[0]]}),[Ge,k,de]),Be=(0,l.Z)(We,2),He=Be[0],Ve=Be[1];r.useImperativeHandle(t,(function(){return{focus:function(){se.current.focus(0)},blur:function(){var e=document.activeElement;ue.current.contains(e)&&(null===e||void 0===e||e.blur())}}})),r.useEffect((function(){v&&se.current.focus(0)}),[]);var Xe=r.useMemo((function(){return{min:de,max:fe,direction:le,disabled:p,step:he,included:X,includedStart:He,includedEnd:Ve,range:k,tabIndex:oe,ariaLabelForHandle:ie,ariaLabelledByForHandle:ae,ariaValueTextFormatterForHandle:ce}}),[de,fe,le,p,he,X,He,Ve,k,oe,ie,ae,ce]);return r.createElement(b.Provider,{value:Xe},r.createElement("div",{ref:ue,className:f()(i,a,(n={},(0,s.Z)(n,"".concat(i,"-disabled"),p),(0,s.Z)(n,"".concat(i,"-vertical"),H),(0,s.Z)(n,"".concat(i,"-horizontal"),!H),(0,s.Z)(n,"".concat(i,"-with-marks"),me.length),n)),style:u,onMouseDown:function(e){e.preventDefault();var t,n=ue.current.getBoundingClientRect(),r=n.width,o=n.height,i=n.left,a=n.top,c=n.bottom,s=n.right,u=e.clientX,l=e.clientY;switch(le){case"btt":t=(c-l)/o;break;case"ttb":t=(l-a)/o;break;case"rtl":t=(s-u)/r;break;default:t=(u-i)/r}Ie(we(de+t*(fe-de)))}},r.createElement("div",{className:"".concat(i,"-rail"),style:K}),r.createElement(D,{prefixCls:i,style:Y,values:Ge,startPoint:q,onStartMove:ke?Ne:null}),r.createElement(F,{prefixCls:i,marks:me,dots:te,style:J,activeStyle:$}),r.createElement(R,{ref:se,prefixCls:i,style:Q,values:_e,draggingIndex:ze,onStartMove:Ne,onOffsetChange:function(e,t){if(!p){var n=ye(Ee,e,t);null===Z||void 0===Z||Z(Me(Ee)),Re(n.values),null===_||void 0===_||_(Me(n.values)),Le(n.value)}},onFocus:w,onBlur:y,handleRender:ne}),r.createElement(L,{prefixCls:i,marks:me,onClick:Ie})))}));var z=A,Z=n(1929),_=n(5314),U=n(8834),N=n(6573),j=r.forwardRef((function(e,t){var n=e.visible,o=(0,r.useRef)(null),i=(0,r.useRef)(null);function a(){_.Z.cancel(i.current),i.current=null}return r.useEffect((function(){return n?i.current=(0,_.Z)((function(){var e;null===(e=o.current)||void 0===e||e.forcePopupAlign(),i.current=null})):a(),a}),[n,e.title]),r.createElement(N.Z,(0,u.Z)({ref:(0,U.sQ)(o,t)},e))})),G=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},W=r.forwardRef((function(e,t){var n=r.useContext(Z.E_),o=n.getPrefixCls,i=n.direction,a=n.getPopupContainer,d=r.useState({}),h=(0,l.Z)(d,2),p=h[0],m=h[1],g=function(e,t){m((function(n){return(0,u.Z)((0,u.Z)({},n),(0,s.Z)({},e,t))}))},v=function(e,t){return e||(t?"rtl"===i?"left":"right":"top")},w=e.prefixCls,y=e.tooltipPrefixCls,b=e.range,C=e.className,S=G(e,["prefixCls","tooltipPrefixCls","range","className"]),x=o("slider",w),E=o("tooltip",y),P=f()(C,(0,s.Z)({},"".concat(x,"-rtl"),"rtl"===i));"rtl"!==i||S.vertical||(S.reverse=!S.reverse);var M=r.useMemo((function(){return b?"object"===(0,c.Z)(b)?[!0,b.draggableTrack]:[!0,!1]:[!1]}),[b]),R=(0,l.Z)(M,2),I=R[0],T=R[1];return r.createElement(z,(0,u.Z)({},S,{step:S.step,range:I,draggableTrack:T,className:P,ref:t,prefixCls:x,handleRender:function(t,n){var i=n.index,c=n.dragging,s=o(),l=e.tipFormatter,d=e.tooltipVisible,f=e.tooltipPlacement,h=e.getTooltipPopupContainer,m=e.vertical,w=!!l&&(p[i]||c),y=d||void 0===d&&w,b=(0,u.Z)((0,u.Z)({},t.props),{onMouseEnter:function(){return g(i,!0)},onMouseLeave:function(){return g(i,!1)}});return r.createElement(j,{prefixCls:E,title:l?l(n.value):"",visible:y,placement:v(f,m),transitionName:"".concat(s,"-zoom-down"),key:i,overlayClassName:"".concat(x,"-tooltip"),getPopupContainer:h||a},r.cloneElement(t,b))}}))}));W.defaultProps={tipFormatter:function(e){return"number"===typeof e?e.toString():""}};var B=W,H=function(e,t){return H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},H(e,t)};var V=function(){return V=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},V.apply(this,arguments)};Object.create;Object.create;var X=n(6272),q=n.n(X);function Y(e,t,n,r,o,i){void 0===i&&(i=0);var a=ae(e,t,i),c=a.width,s=a.height,u=Math.min(c,n),l=Math.min(s,r);return u>l*o?{width:l*o,height:l}:{width:u,height:u/o}}function Q(e,t,n,r,o){void 0===o&&(o=0);var i=ae(t.width,t.height,o),a=i.width,c=i.height;return{x:K(e.x,a,n.width,r),y:K(e.y,c,n.height,r)}}function K(e,t,n,r){var o=t*r/2-n/2;return ce(e,-o,o)}function J(e,t){return Math.sqrt(Math.pow(e.y-t.y,2)+Math.pow(e.x-t.x,2))}function $(e,t){return 180*Math.atan2(t.y-e.y,t.x-e.x)/Math.PI}function ee(e,t,n,r,o,i,a){void 0===i&&(i=0),void 0===a&&(a=!0);var c=a?te:ne,s=ae(t.width,t.height,i),u=ae(t.naturalWidth,t.naturalHeight,i),l={x:c(100,((s.width-n.width/o)/2-e.x/o)/s.width*100),y:c(100,((s.height-n.height/o)/2-e.y/o)/s.height*100),width:c(100,n.width/s.width*100/o),height:c(100,n.height/s.height*100/o)},d=Math.round(c(u.width,l.width*u.width/100)),f=Math.round(c(u.height,l.height*u.height/100)),h=u.width>=u.height*r?{width:Math.round(f*r),height:f}:{width:d,height:Math.round(d/r)};return{croppedAreaPercentages:l,croppedAreaPixels:V(V({},h),{x:Math.round(c(u.width-h.width,l.x*u.width/100)),y:Math.round(c(u.height-h.height,l.y*u.height/100))})}}function te(e,t){return Math.min(e,Math.max(0,t))}function ne(e,t){return t}function re(e,t,n,r,o,i){var a=ae(t.width,t.height,n),c=ce(r.width/a.width*(100/e.width),o,i);return{crop:{x:c*a.width/2-r.width/2-a.width*c*(e.x/100),y:c*a.height/2-r.height/2-a.height*c*(e.y/100)},zoom:c}}function oe(e,t,n,r,o,i){void 0===n&&(n=0);var a=ae(t.naturalWidth,t.naturalHeight,n),c=ce(function(e,t,n){var r=function(e){return e.width>e.height?e.width/e.naturalWidth:e.height/e.naturalHeight}(t);return n.height>n.width?n.height/(e.height*r):n.width/(e.width*r)}(e,t,r),o,i),s=r.height>r.width?r.height/e.height:r.width/e.width;return{crop:{x:((a.width-e.width)/2-e.x)*s,y:((a.height-e.height)/2-e.y)*s},zoom:c}}function ie(e,t){return{x:(t.x+e.x)/2,y:(t.y+e.y)/2}}function ae(e,t,n){var r=n*Math.PI/180;return{width:Math.abs(Math.cos(r)*e)+Math.abs(Math.sin(r)*t),height:Math.abs(Math.sin(r)*e)+Math.abs(Math.cos(r)*t)}}function ce(e,t,n){return Math.min(Math.max(e,t),n)}function se(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.filter((function(e){return"string"===typeof e&&e.length>0})).join(" ").trim()}var ue=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.imageRef=r.createRef(),n.videoRef=r.createRef(),n.containerRef=null,n.styleRef=null,n.containerRect=null,n.mediaSize={width:0,height:0,naturalWidth:0,naturalHeight:0},n.dragStartPosition={x:0,y:0},n.dragStartCrop={x:0,y:0},n.lastPinchDistance=0,n.lastPinchRotation=0,n.rafDragTimeout=null,n.rafPinchTimeout=null,n.wheelTimer=null,n.state={cropSize:null,hasWheelJustStarted:!1},n.preventZoomSafari=function(e){return e.preventDefault()},n.cleanEvents=function(){document.removeEventListener("mousemove",n.onMouseMove),document.removeEventListener("mouseup",n.onDragStopped),document.removeEventListener("touchmove",n.onTouchMove),document.removeEventListener("touchend",n.onDragStopped)},n.clearScrollEvent=function(){n.containerRef&&n.containerRef.removeEventListener("wheel",n.onWheel),n.wheelTimer&&clearTimeout(n.wheelTimer)},n.onMediaLoad=function(){var e=n.computeSizes();e&&(n.emitCropData(),n.setInitialCrop(e)),n.props.onMediaLoaded&&n.props.onMediaLoaded(n.mediaSize)},n.setInitialCrop=function(e){if(n.props.initialCroppedAreaPercentages){var t=re(n.props.initialCroppedAreaPercentages,n.mediaSize,n.props.rotation,e,n.props.minZoom,n.props.maxZoom),r=t.crop,o=t.zoom;n.props.onCropChange(r),n.props.onZoomChange&&n.props.onZoomChange(o)}else if(n.props.initialCroppedAreaPixels){var i=oe(n.props.initialCroppedAreaPixels,n.mediaSize,n.props.rotation,e,n.props.minZoom,n.props.maxZoom);r=i.crop,o=i.zoom;n.props.onCropChange(r),n.props.onZoomChange&&n.props.onZoomChange(o)}},n.computeSizes=function(){var e,t,r,o,i,a,c=n.imageRef.current||n.videoRef.current;if(c&&n.containerRef){n.containerRect=n.containerRef.getBoundingClientRect();var s=n.containerRect.width/n.containerRect.height,u=(null===(e=n.imageRef.current)||void 0===e?void 0:e.naturalWidth)||(null===(t=n.videoRef.current)||void 0===t?void 0:t.videoWidth)||0,l=(null===(r=n.imageRef.current)||void 0===r?void 0:r.naturalHeight)||(null===(o=n.videoRef.current)||void 0===o?void 0:o.videoHeight)||0,d=u/l,f=void 0;if(c.offsetWidth<u||c.offsetHeight<l)switch(n.props.objectFit){default:case"contain":f=s>d?{width:n.containerRect.height*d,height:n.containerRect.height}:{width:n.containerRect.width,height:n.containerRect.width/d};break;case"horizontal-cover":f={width:n.containerRect.width,height:n.containerRect.width/d};break;case"vertical-cover":f={width:n.containerRect.height*d,height:n.containerRect.height};break;case"auto-cover":f=u>l?{width:n.containerRect.width,height:n.containerRect.width/d}:{width:n.containerRect.height*d,height:n.containerRect.height}}else f={width:c.offsetWidth,height:c.offsetHeight};n.mediaSize=V(V({},f),{naturalWidth:u,naturalHeight:l});var h=n.props.cropSize?n.props.cropSize:Y(n.mediaSize.width,n.mediaSize.height,n.containerRect.width,n.containerRect.height,n.props.aspect,n.props.rotation);return(null===(i=n.state.cropSize)||void 0===i?void 0:i.height)===h.height&&(null===(a=n.state.cropSize)||void 0===a?void 0:a.width)===h.width||n.props.onCropSizeChange&&n.props.onCropSizeChange(h),n.setState({cropSize:h},n.recomputeCropPosition),h}},n.onMouseDown=function(e){e.preventDefault(),document.addEventListener("mousemove",n.onMouseMove),document.addEventListener("mouseup",n.onDragStopped),n.onDragStart(t.getMousePoint(e))},n.onMouseMove=function(e){return n.onDrag(t.getMousePoint(e))},n.onTouchStart=function(e){n.props.onTouchRequest&&!n.props.onTouchRequest(e)||(document.addEventListener("touchmove",n.onTouchMove,{passive:!1}),document.addEventListener("touchend",n.onDragStopped),2===e.touches.length?n.onPinchStart(e):1===e.touches.length&&n.onDragStart(t.getTouchPoint(e.touches[0])))},n.onTouchMove=function(e){e.preventDefault(),2===e.touches.length?n.onPinchMove(e):1===e.touches.length&&n.onDrag(t.getTouchPoint(e.touches[0]))},n.onDragStart=function(e){var t,r,o=e.x,i=e.y;n.dragStartPosition={x:o,y:i},n.dragStartCrop=V({},n.props.crop),null===(r=(t=n.props).onInteractionStart)||void 0===r||r.call(t)},n.onDrag=function(e){var t=e.x,r=e.y;n.rafDragTimeout&&window.cancelAnimationFrame(n.rafDragTimeout),n.rafDragTimeout=window.requestAnimationFrame((function(){if(n.state.cropSize&&void 0!==t&&void 0!==r){var e=t-n.dragStartPosition.x,o=r-n.dragStartPosition.y,i={x:n.dragStartCrop.x+e,y:n.dragStartCrop.y+o},a=n.props.restrictPosition?Q(i,n.mediaSize,n.state.cropSize,n.props.zoom,n.props.rotation):i;n.props.onCropChange(a)}}))},n.onDragStopped=function(){var e,t;n.cleanEvents(),n.emitCropData(),null===(t=(e=n.props).onInteractionEnd)||void 0===t||t.call(e)},n.onWheel=function(e){if(!n.props.onWheelRequest||n.props.onWheelRequest(e)){e.preventDefault();var r=t.getMousePoint(e),o=q()(e).pixelY,i=n.props.zoom-o*n.props.zoomSpeed/200;n.setNewZoom(i,r,{shouldUpdatePosition:!0}),n.state.hasWheelJustStarted||n.setState({hasWheelJustStarted:!0},(function(){var e,t;return null===(t=(e=n.props).onInteractionStart)||void 0===t?void 0:t.call(e)})),n.wheelTimer&&clearTimeout(n.wheelTimer),n.wheelTimer=window.setTimeout((function(){return n.setState({hasWheelJustStarted:!1},(function(){var e,t;return null===(t=(e=n.props).onInteractionEnd)||void 0===t?void 0:t.call(e)}))}),250)}},n.getPointOnContainer=function(e){var t=e.x,r=e.y;if(!n.containerRect)throw new Error("The Cropper is not mounted");return{x:n.containerRect.width/2-(t-n.containerRect.left),y:n.containerRect.height/2-(r-n.containerRect.top)}},n.getPointOnMedia=function(e){var t=e.x,r=e.y,o=n.props,i=o.crop,a=o.zoom;return{x:(t+i.x)/a,y:(r+i.y)/a}},n.setNewZoom=function(e,t,r){var o=(void 0===r?{}:r).shouldUpdatePosition,i=void 0===o||o;if(n.state.cropSize&&n.props.onZoomChange){var a=n.getPointOnContainer(t),c=n.getPointOnMedia(a),s=ce(e,n.props.minZoom,n.props.maxZoom),u={x:c.x*s-a.x,y:c.y*s-a.y};if(i){var l=n.props.restrictPosition?Q(u,n.mediaSize,n.state.cropSize,s,n.props.rotation):u;n.props.onCropChange(l)}n.props.onZoomChange(s)}},n.getCropData=function(){return n.state.cropSize?ee(n.props.restrictPosition?Q(n.props.crop,n.mediaSize,n.state.cropSize,n.props.zoom,n.props.rotation):n.props.crop,n.mediaSize,n.state.cropSize,n.getAspect(),n.props.zoom,n.props.rotation,n.props.restrictPosition):null},n.emitCropData=function(){var e=n.getCropData();if(e){var t=e.croppedAreaPercentages,r=e.croppedAreaPixels;n.props.onCropComplete&&n.props.onCropComplete(t,r),n.props.onCropAreaChange&&n.props.onCropAreaChange(t,r)}},n.emitCropAreaChange=function(){var e=n.getCropData();if(e){var t=e.croppedAreaPercentages,r=e.croppedAreaPixels;n.props.onCropAreaChange&&n.props.onCropAreaChange(t,r)}},n.recomputeCropPosition=function(){if(n.state.cropSize){var e=n.props.restrictPosition?Q(n.props.crop,n.mediaSize,n.state.cropSize,n.props.zoom,n.props.rotation):n.props.crop;n.props.onCropChange(e),n.emitCropData()}},n}return function(e,t){function n(){this.constructor=e}H(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t.prototype.componentDidMount=function(){window.addEventListener("resize",this.computeSizes),this.containerRef&&(this.props.zoomWithScroll&&this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}),this.containerRef.addEventListener("gesturestart",this.preventZoomSafari),this.containerRef.addEventListener("gesturechange",this.preventZoomSafari)),this.props.disableAutomaticStylesInjection||(this.styleRef=document.createElement("style"),this.styleRef.setAttribute("type","text/css"),this.props.nonce&&this.styleRef.setAttribute("nonce",this.props.nonce),this.styleRef.innerHTML=".reactEasyCrop_Container {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  overflow: hidden;\n  user-select: none;\n  touch-action: none;\n  cursor: move;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.reactEasyCrop_Image,\n.reactEasyCrop_Video {\n  will-change: transform; /* this improves performances and prevent painting issues on iOS Chrome */\n}\n\n.reactEasyCrop_Contain {\n  max-width: 100%;\n  max-height: 100%;\n  margin: auto;\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n}\n.reactEasyCrop_Cover_Horizontal {\n  width: 100%;\n  height: auto;\n}\n.reactEasyCrop_Cover_Vertical {\n  width: auto;\n  height: 100%;\n}\n\n.reactEasyCrop_CropArea {\n  position: absolute;\n  left: 50%;\n  top: 50%;\n  transform: translate(-50%, -50%);\n  border: 1px solid rgba(255, 255, 255, 0.5);\n  box-sizing: border-box;\n  box-shadow: 0 0 0 9999em;\n  color: rgba(0, 0, 0, 0.5);\n  overflow: hidden;\n}\n\n.reactEasyCrop_CropAreaRound {\n  border-radius: 50%;\n}\n\n.reactEasyCrop_CropAreaGrid::before {\n  content: ' ';\n  box-sizing: border-box;\n  position: absolute;\n  border: 1px solid rgba(255, 255, 255, 0.5);\n  top: 0;\n  bottom: 0;\n  left: 33.33%;\n  right: 33.33%;\n  border-top: 0;\n  border-bottom: 0;\n}\n\n.reactEasyCrop_CropAreaGrid::after {\n  content: ' ';\n  box-sizing: border-box;\n  position: absolute;\n  border: 1px solid rgba(255, 255, 255, 0.5);\n  top: 33.33%;\n  bottom: 33.33%;\n  left: 0;\n  right: 0;\n  border-left: 0;\n  border-right: 0;\n}\n",document.head.appendChild(this.styleRef)),this.imageRef.current&&this.imageRef.current.complete&&this.onMediaLoad(),this.props.setImageRef&&this.props.setImageRef(this.imageRef),this.props.setVideoRef&&this.props.setVideoRef(this.videoRef)},t.prototype.componentWillUnmount=function(){var e;window.removeEventListener("resize",this.computeSizes),this.containerRef&&(this.containerRef.removeEventListener("gesturestart",this.preventZoomSafari),this.containerRef.removeEventListener("gesturechange",this.preventZoomSafari)),this.styleRef&&(null===(e=this.styleRef.parentNode)||void 0===e||e.removeChild(this.styleRef)),this.cleanEvents(),this.props.zoomWithScroll&&this.clearScrollEvent()},t.prototype.componentDidUpdate=function(e){var t,n,r,o,i,a,c,s,u;e.rotation!==this.props.rotation?(this.computeSizes(),this.recomputeCropPosition()):e.aspect!==this.props.aspect?this.computeSizes():e.zoom!==this.props.zoom?this.recomputeCropPosition():(null===(t=e.cropSize)||void 0===t?void 0:t.height)!==(null===(n=this.props.cropSize)||void 0===n?void 0:n.height)||(null===(r=e.cropSize)||void 0===r?void 0:r.width)!==(null===(o=this.props.cropSize)||void 0===o?void 0:o.width)?this.computeSizes():(null===(i=e.crop)||void 0===i?void 0:i.x)===(null===(a=this.props.crop)||void 0===a?void 0:a.x)&&(null===(c=e.crop)||void 0===c?void 0:c.y)===(null===(s=this.props.crop)||void 0===s?void 0:s.y)||this.emitCropAreaChange(),e.zoomWithScroll!==this.props.zoomWithScroll&&this.containerRef&&(this.props.zoomWithScroll?this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}):this.clearScrollEvent()),e.video!==this.props.video&&(null===(u=this.videoRef.current)||void 0===u||u.load())},t.prototype.getAspect=function(){var e=this.props,t=e.cropSize,n=e.aspect;return t?t.width/t.height:n},t.prototype.onPinchStart=function(e){var n=t.getTouchPoint(e.touches[0]),r=t.getTouchPoint(e.touches[1]);this.lastPinchDistance=J(n,r),this.lastPinchRotation=$(n,r),this.onDragStart(ie(n,r))},t.prototype.onPinchMove=function(e){var n=this,r=t.getTouchPoint(e.touches[0]),o=t.getTouchPoint(e.touches[1]),i=ie(r,o);this.onDrag(i),this.rafPinchTimeout&&window.cancelAnimationFrame(this.rafPinchTimeout),this.rafPinchTimeout=window.requestAnimationFrame((function(){var e=J(r,o),t=n.props.zoom*(e/n.lastPinchDistance);n.setNewZoom(t,i,{shouldUpdatePosition:!1}),n.lastPinchDistance=e;var a=$(r,o),c=n.props.rotation+(a-n.lastPinchRotation);n.props.onRotationChange&&n.props.onRotationChange(c),n.lastPinchRotation=a}))},t.prototype.render=function(){var e=this,t=this.props,n=t.image,o=t.video,i=t.mediaProps,a=t.transform,c=t.crop,s=c.x,u=c.y,l=t.rotation,d=t.zoom,f=t.cropShape,h=t.showGrid,p=t.style,m=p.containerStyle,g=p.cropAreaStyle,v=p.mediaStyle,w=t.classes,y=w.containerClassName,b=w.cropAreaClassName,C=w.mediaClassName,S=t.objectFit;return r.createElement("div",{onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart,ref:function(t){return e.containerRef=t},"data-testid":"container",style:m,className:se("reactEasyCrop_Container",y)},n?r.createElement("img",V({alt:"",className:se("reactEasyCrop_Image","contain"===S&&"reactEasyCrop_Contain","horizontal-cover"===S&&"reactEasyCrop_Cover_Horizontal","vertical-cover"===S&&"reactEasyCrop_Cover_Vertical","auto-cover"===S&&(this.mediaSize.naturalWidth>this.mediaSize.naturalHeight?"reactEasyCrop_Cover_Horizontal":"reactEasyCrop_Cover_Vertical"),C)},i,{src:n,ref:this.imageRef,style:V(V({},v),{transform:a||"translate("+s+"px, "+u+"px) rotate("+l+"deg) scale("+d+")"}),onLoad:this.onMediaLoad})):o&&r.createElement("video",V({autoPlay:!0,loop:!0,muted:!0,className:se("reactEasyCrop_Video","contain"===S&&"reactEasyCrop_Contain","horizontal-cover"===S&&"reactEasyCrop_Cover_Horizontal","vertical-cover"===S&&"reactEasyCrop_Cover_Vertical","auto-cover"===S&&(this.mediaSize.naturalWidth>this.mediaSize.naturalHeight?"reactEasyCrop_Cover_Horizontal":"reactEasyCrop_Cover_Vertical"),C)},i,{ref:this.videoRef,onLoadedMetadata:this.onMediaLoad,style:V(V({},v),{transform:a||"translate("+s+"px, "+u+"px) rotate("+l+"deg) scale("+d+")"}),controls:!1}),(Array.isArray(o)?o:[{src:o}]).map((function(e){return r.createElement("source",V({key:e.src},e))}))),this.state.cropSize&&r.createElement("div",{style:V(V({},g),{width:this.state.cropSize.width,height:this.state.cropSize.height}),"data-testid":"cropper",className:se("reactEasyCrop_CropArea","round"===f&&"reactEasyCrop_CropAreaRound",h&&"reactEasyCrop_CropAreaGrid",b)}))},t.defaultProps={zoom:1,rotation:0,aspect:4/3,maxZoom:3,minZoom:1,cropShape:"rect",objectFit:"contain",showGrid:!0,style:{},classes:{},mediaProps:{},zoomSpeed:1,restrictPosition:!0,zoomWithScroll:!0},t.getMousePoint=function(e){return{x:Number(e.clientX),y:Number(e.clientY)}},t.getTouchPoint=function(e){return{x:Number(e.clientX),y:Number(e.clientY)}},t}(r.Component),le=ue;var de=function(){return de=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},de.apply(this,arguments)};function fe(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{s(r.next(e))}catch(t){i(t)}}function c(e){try{s(r.throw(e))}catch(t){i(t)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,c)}s((r=r.apply(e,t||[])).next())}))}function he(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(c){i=[6,c],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}}var pe="img-crop",me=.1,ge=(0,r.forwardRef)((function(e,t){var n=e.cropperRef,o=e.image,i=e.aspect,a=e.shape,c=e.grid,s=e.zoom,u=e.rotate,l=e.minZoom,d=e.maxZoom,f=e.cropperProps,h=(0,r.useState)({x:0,y:0}),p=h[0],m=h[1],g=(0,r.useState)({width:0,height:0}),v=g[0],w=g[1],y=(0,r.useState)(1),b=y[0],C=y[1],S=(0,r.useState)(0),x=S[0],E=S[1],P=(0,r.useRef)({width:0,height:0,x:0,y:0}),M=(0,r.useCallback)((function(e){var t=e.width,n=e.height,r=n*i;w(t>r?{width:r,height:n}:{width:t,height:t/i})}),[i]),R=(0,r.useCallback)((function(e,t){P.current=t}),[]);return(0,r.useImperativeHandle)(t,(function(){return{rotateVal:x,setZoomVal:C,setRotateVal:E,cropPixelsRef:P}}),[x]),r.createElement(r.Fragment,null,r.createElement(le,de({},f,{ref:n,image:o,crop:p,cropSize:v,onCropChange:m,aspect:i,cropShape:a,showGrid:c,zoomWithScroll:s,zoom:b,rotation:x,onZoomChange:C,onRotationChange:E,minZoom:l,maxZoom:d,onMediaLoaded:M,onCropComplete:R,classes:{containerClassName:"".concat(pe,"-container"),mediaClassName:"".concat(pe,"-media")}})),s&&r.createElement("section",{className:"".concat(pe,"-control ").concat(pe,"-control-zoom")},r.createElement("button",{onClick:function(){return C(b-me)},disabled:b-me<l},"\uff0d"),r.createElement(B,{min:l,max:d,step:me,value:b,onChange:C}),r.createElement("button",{onClick:function(){return C(b+me)},disabled:b+me>d},"\uff0b")),u&&r.createElement("section",{className:"".concat(pe,"-control ").concat(pe,"-control-rotate")},r.createElement("button",{onClick:function(){return E(x-1)},disabled:-180===x},"\u21ba"),r.createElement(B,{min:-180,max:180,step:1,value:x,onChange:E}),r.createElement("button",{onClick:function(){return E(x+1)},disabled:180===x},"\u21bb")))})),ve=(0,r.memo)(ge);!function(e){if(e&&"undefined"!=typeof window){var t=document.createElement("style");t.setAttribute("media","screen"),t.innerHTML=e,document.head.appendChild(t)}}(".img-crop-modal .img-crop-container {\n  position: relative;\n  width: 100%;\n  height: 40vh;\n}\n.img-crop-modal .img-crop-control {\n  display: flex;\n  align-items: center;\n  width: 60%;\n  margin-left: auto;\n  margin-right: auto;\n}\n.img-crop-modal .img-crop-control:first-of-type {\n  margin-top: 16px;\n}\n.img-crop-modal .img-crop-control:last-of-type {\n  margin-bottom: -8px;\n}\n.img-crop-modal .img-crop-control button {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 34px;\n  height: 34px;\n  padding: 0;\n  font-style: normal;\n  background: transparent;\n  border: 0;\n  outline: 0;\n  cursor: pointer;\n}\n.img-crop-modal .img-crop-control button[disabled] {\n  cursor: default;\n}\n.img-crop-modal .img-crop-control button + div:only-of-type {\n  flex: 1;\n  margin: 0 8px;\n}\n.img-crop-modal .img-crop-control-zoom button {\n  font-size: 18px;\n}\n.img-crop-modal .img-crop-control-rotate button {\n  font-size: 16px;\n}\n.img-crop-modal .img-crop-control-rotate button:first-of-type {\n  transform: rotate(-20deg);\n}\n.img-crop-modal .img-crop-control-rotate button:last-of-type {\n  transform: rotate(20deg);\n}\n");var we=(0,r.forwardRef)((function(e,t){var n=e.aspect,c=void 0===n?1:n,s=e.shape,u=void 0===s?"rect":s,l=e.grid,d=void 0!==l&&l,f=e.quality,h=void 0===f?.4:f,p=e.fillColor,m=void 0===p?"white":p,g=e.zoom,v=void 0===g||g,w=e.rotate,y=void 0!==w&&w,b=e.minZoom,C=void 0===b?1:b,S=e.maxZoom,x=void 0===S?3:S,E=e.modalTitle,P=e.modalWidth,M=e.modalOk,R=e.modalCancel,I=e.modalMaskTransitionName,T=e.modalTransitionName,D=e.modalClassName,O=e.onModalOk,L=e.onModalCancel,k=e.beforeCrop,F=e.onUploadFail,A=e.cropperProps,z=e.children,Z=(0,r.useRef)({});Z.current.onModalOk=O,Z.current.onModalCancel=L,Z.current.beforeCrop=k,Z.current.onUploadFail=F;var _=(0,r.useState)(""),U=_[0],N=_[1],j=(0,r.useRef)(),G=(0,r.useRef)(),W=(0,r.useRef)(),B=(0,r.useRef)(),H=(0,r.useMemo)((function(){var e=Array.isArray(z)?z[0]:z,t=e.props,n=t.beforeUpload,r=t.accept,o=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(t,["beforeUpload","accept"]);return G.current=n,de(de({},e),{props:de(de({},o),{accept:r||"image/*",beforeUpload:function(e,t){return new Promise((function(n,r){return fe(void 0,void 0,void 0,(function(){var o;return he(this,(function(i){switch(i.label){case 0:return Z.current.beforeCrop?[4,Z.current.beforeCrop(e,t)]:[3,2];case 1:if(!i.sent())return[2,r()];i.label=2;case 2:return j.current=e,W.current=function(e){var t,r;null===(r=(t=Z.current).onModalOk)||void 0===r||r.call(t,e),n(e)},B.current=function(e){var t,n;null===(n=(t=Z.current).onUploadFail)||void 0===n||n.call(t,e),r()},(o=new FileReader).addEventListener("load",(function(){"string"===typeof o.result&&N(o.result)})),o.readAsDataURL(e),[2]}}))}))}))}})})}),[z]),V=(0,r.useRef)({}),X=(0,r.useMemo)((function(){var e={width:P,okText:M,cancelText:R,maskTransitionName:I,transitionName:T};return Object.keys(e).forEach((function(t){e[t]||delete e[t]})),e}),[R,I,M,T,P]),q=function(){N(""),V.current.setZoomVal(1),V.current.setRotateVal(0)},Y=(0,r.useCallback)((function(){var e,t;null===(t=(e=Z.current).onModalCancel)||void 0===t||t.call(e),q()}),[]),Q=(0,r.useCallback)((function(){return fe(void 0,void 0,void 0,(function(){var e,t,n,r,o,a,c,s,u,l,d,f,p,g,v,w,b,C,S,x,E,P,M,R;return he(this,(function(I){return q(),e=document.createElement("canvas"),t=e.getContext("2d"),n=document.querySelector(".".concat(pe,"-media")),r=V.current.cropPixelsRef.current,o=r.width,a=r.height,c=r.x,s=r.y,y&&0!==V.current.rotateVal?(u=n.naturalWidth,l=n.naturalHeight,d=V.current.rotateVal*(Math.PI/180),f=Math.abs(Math.sin(d)),p=Math.abs(Math.cos(d)),g=u*p+l*f,v=l*p+u*f,e.width=g,e.height=v,t.fillStyle=m,t.fillRect(0,0,g,v),w=g/2,b=v/2,t.translate(w,b),t.rotate(d),t.translate(-w,-b),C=(g-u)/2,S=(v-l)/2,t.drawImage(n,0,0,u,l,C,S,u,l),x=t.getImageData(0,0,g,v),e.width=o,e.height=a,t.putImageData(x,-c,-s)):(e.width=o,e.height=a,t.fillStyle=m,t.fillRect(0,0,o,a),t.drawImage(n,c,s,o,a,0,0,o,a)),E=j.current,P=E.type,M=E.name,R=E.uid,e.toBlob((function(e){return fe(void 0,void 0,void 0,(function(){var t,n;return he(this,(function(r){switch(r.label){case 0:return t=Object.assign(new File([e],M,{type:P}),{uid:R}),G.current?[4,G.current(t,[t])]:[2,W.current(t)];case 1:return!0===(n=r.sent())?[2,W.current(t)]:!1===n?[2,B.current(new Error("beforeUpload return false"))]:(delete t[i.Z.LIST_IGNORE],n===i.Z.LIST_IGNORE?(Object.defineProperty(t,i.Z.LIST_IGNORE,{value:!0,configurable:!0}),[2,B.current(new Error("beforeUpload return LIST_IGNORE"))]):"object"===typeof n&&null!==n?[2,W.current(n)]:[2])}}))}))}),P,h),[2]}))}))}),[m,h,y]),K=function(e){return r.createElement(r.Fragment,null,H,U&&r.createElement(o.Z,de({visible:!0,wrapClassName:"".concat(pe,"-modal ").concat(D||""),title:e,onOk:Q,onCancel:Y,maskClosable:!1,destroyOnClose:!0},X),r.createElement(ve,{ref:V,cropperRef:t,image:U,aspect:c,shape:u,grid:d,zoom:v,rotate:y,minZoom:C,maxZoom:x,cropperProps:A})))};return E?K(E):r.createElement(a.Z,null,(function(e,t){return K("zh-cn"===t?"\u7f16\u8f91\u56fe\u7247":"Edit image")}))}))},1102:function(e){var t;t=function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}return n.m=e,n.c=t,n.p="",n(0)}([function(e,t,n){n(7),n(8),e.exports=n(9)},function(e,t,n){(function(t){!function(n){var r="function"===typeof t&&t||function(e){setTimeout(e,1)};function o(e,t){return function(){e.apply(t,arguments)}}var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function a(e){if("object"!==typeof this)throw new TypeError("Promises must be constructed via new");if("function"!==typeof e)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],f(e,o(s,this),o(u,this))}function c(e){var t=this;null!==this._state?r((function(){var n=t._state?e.onFulfilled:e.onRejected;if(null!==n){var r;try{r=n(t._value)}catch(o){return void e.reject(o)}e.resolve(r)}else(t._state?e.resolve:e.reject)(t._value)})):this._deferreds.push(e)}function s(e){try{if(e===this)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"===typeof e||"function"===typeof e)){var t=e.then;if("function"===typeof t)return void f(o(t,e),o(s,this),o(u,this))}this._state=!0,this._value=e,l.call(this)}catch(n){u.call(this,n)}}function u(e){this._state=!1,this._value=e,l.call(this)}function l(){for(var e=0,t=this._deferreds.length;e<t;e++)c.call(this,this._deferreds[e]);this._deferreds=null}function d(e,t,n,r){this.onFulfilled="function"===typeof e?e:null,this.onRejected="function"===typeof t?t:null,this.resolve=n,this.reject=r}function f(e,t,n){var r=!1;try{e((function(e){r||(r=!0,t(e))}),(function(e){r||(r=!0,n(e))}))}catch(o){if(r)return;r=!0,n(o)}}a.prototype.catch=function(e){return this.then(null,e)},a.prototype.then=function(e,t){var n=this;return new a((function(r,o){c.call(n,new d(e,t,r,o))}))},a.all=function(){var e=Array.prototype.slice.call(1===arguments.length&&i(arguments[0])?arguments[0]:arguments);return new a((function(t,n){if(0===e.length)return t([]);var r=e.length;function o(i,a){try{if(a&&("object"===typeof a||"function"===typeof a)){var c=a.then;if("function"===typeof c)return void c.call(a,(function(e){o(i,e)}),n)}e[i]=a,0===--r&&t(e)}catch(s){n(s)}}for(var i=0;i<e.length;i++)o(i,e[i])}))},a.resolve=function(e){return e&&"object"===typeof e&&e.constructor===a?e:new a((function(t){t(e)}))},a.reject=function(e){return new a((function(t,n){n(e)}))},a.race=function(e){return new a((function(t,n){for(var r=0,o=e.length;r<o;r++)e[r].then(t,n)}))},a._setImmediateFn=function(e){r=e},a.prototype.always=function(e){var t=this.constructor;return this.then((function(n){return t.resolve(e()).then((function(){return n}))}),(function(n){return t.resolve(e()).then((function(){throw n}))}))},"undefined"!==typeof e&&e.exports?e.exports=a:n.Promise||(n.Promise=a)}(this)}).call(t,n(2).setImmediate)},function(e,t,n){(function(e){var r="undefined"!==typeof e&&e||"undefined"!==typeof self&&self||window,o=Function.prototype.apply;function i(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new i(o.call(setTimeout,r,arguments),clearTimeout)},t.setInterval=function(){return new i(o.call(setInterval,r,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(r,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},n(3),t.setImmediate="undefined"!==typeof self&&self.setImmediate||"undefined"!==typeof e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!==typeof self&&self.clearImmediate||"undefined"!==typeof e&&e.clearImmediate||this&&this.clearImmediate}).call(t,function(){return this}())},function(e,t,n){(function(e,t){!function(e,n){"use strict";if(!e.setImmediate){var r,o=1,i={},a=!1,c=e.document,s=Object.getPrototypeOf&&Object.getPrototypeOf(e);s=s&&s.setTimeout?s:e,"[object process]"==={}.toString.call(e.process)?r=function(e){t.nextTick((function(){l(e)}))}:function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?function(){var t="setImmediate$"+Math.random()+"$",n=function(n){n.source===e&&"string"===typeof n.data&&0===n.data.indexOf(t)&&l(+n.data.slice(t.length))};e.addEventListener?e.addEventListener("message",n,!1):e.attachEvent("onmessage",n),r=function(n){e.postMessage(t+n,"*")}}():e.MessageChannel?function(){var e=new MessageChannel;e.port1.onmessage=function(e){l(e.data)},r=function(t){e.port2.postMessage(t)}}():c&&"onreadystatechange"in c.createElement("script")?function(){var e=c.documentElement;r=function(t){var n=c.createElement("script");n.onreadystatechange=function(){l(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}():r=function(e){setTimeout(l,0,e)},s.setImmediate=function(e){"function"!==typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var a={callback:e,args:t};return i[o]=a,r(o),o++},s.clearImmediate=u}function u(e){delete i[e]}function l(e){if(a)setTimeout(l,0,e);else{var t=i[e];if(t){a=!0;try{!function(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(void 0,n)}}(t)}finally{u(e),a=!1}}}}}("undefined"===typeof self?"undefined"===typeof e?this:e:self)}).call(t,function(){return this}(),n(4))},function(e,t){var n,r,o=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function c(e){if(n===setTimeout)return setTimeout(e,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"===typeof setTimeout?setTimeout:i}catch(e){n=i}try{r="function"===typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var s,u=[],l=!1,d=-1;function f(){l&&s&&(l=!1,s.length?u=s.concat(u):d=-1,u.length&&h())}function h(){if(!l){var e=c(f);l=!0;for(var t=u.length;t;){for(s=u,u=[];++d<t;)s&&s[d].run();d=-1,t=u.length}s=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function m(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new p(e,t)),1!==u.length||l||c(h)},p.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=m,o.addListener=m,o.once=m,o.off=m,o.removeListener=m,o.removeAllListeners=m,o.emit=m,o.prependListener=m,o.prependOnceListener=m,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(e,t){var n=function(){try{return new Blob,!0}catch(e){return!1}}()?window.Blob:function(e,t){var n=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MSBlobBuilder||window.MozBlobBuilder);return e.forEach((function(e){n.append(e)})),n.getBlob(t?t.type:void 0)},r=function(){var e=0;function t(){var t=this,r=[],o=Array(21).join("-")+(+new Date*(1e16*Math.random())).toString(36),i=XMLHttpRequest.prototype.send;this.getParts=function(){return r.toString()},this.append=function(e,t,n){r.push("--"+o+'\r\nContent-Disposition: form-data; name="'+e+'"'),t instanceof Blob?(r.push('; filename="'+(n||"blob")+'"\r\nContent-Type: '+t.type+"\r\n\r\n"),r.push(t)):r.push("\r\n\r\n"+t),r.push("\r\n")},e++,XMLHttpRequest.prototype.send=function(a){var c,s,u=this;a===t?(r.push("--"+o+"--\r\n"),s=new n(r),(c=new FileReader).onload=function(){i.call(u,c.result)},c.onerror=function(e){throw e},c.readAsArrayBuffer(s),this.setRequestHeader("Content-Type","multipart/form-data; boundary="+o),0==--e&&(XMLHttpRequest.prototype.send=i)):i.call(this,a)}}return t.prototype=Object.create(FormData.prototype),t}();e.exports={Blob:n,FormData:~navigator.userAgent.indexOf("Android")&&~navigator.vendor.indexOf("Google")&&!~navigator.userAgent.indexOf("Chrome")&&navigator.userAgent.match(/AppleWebKit\/(\d+)/).pop()<=534||/MQQBrowser/g.test(navigator.userAgent)?r:FormData}},function(e,t,n){var r;(function(){var n=function e(t){return t instanceof e?t:this instanceof e?void(this.EXIFwrapped=t):new e(t)};"undefined"!==typeof e&&e.exports&&(t=e.exports=n),t.EXIF=n;var o=n.Tags={36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRation",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",40965:"InteroperabilityIFDPointer",42016:"ImageUniqueID"},i=n.TiffTags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright"},a=n.GPSTags={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential"},c=n.StringValues={ExposureProgram:{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},Components:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}};function s(e){return!!e.exifdata}function u(e,t){function n(n){var r=l(n),o=function(e){var t=new DataView(e);if(255!=t.getUint8(0)||216!=t.getUint8(1))return!1;for(var n=2,r=e.byteLength,o=function(e,t){return 56===e.getUint8(t)&&66===e.getUint8(t+1)&&73===e.getUint8(t+2)&&77===e.getUint8(t+3)&&4===e.getUint8(t+4)&&4===e.getUint8(t+5)};n<r;){if(o(t,n)){var i=t.getUint8(n+7);return i%2!==0&&(i+=1),0===i&&(i=4),f(e,n+8+i,t.getUint16(n+6+i))}n++}}(n);e.exifdata=r||{},e.iptcdata=o||{},t&&t.call(e)}if(e.src)if(/^data\:/i.test(e.src))n(function(e,t){t=t||e.match(/^data\:([^\;]+)\;base64,/im)[1]||"",e=e.replace(/^data\:([^\;]+)\;base64,/gim,"");for(var n=atob(e),r=n.length,o=new ArrayBuffer(r),i=new Uint8Array(o),a=0;a<r;a++)i[a]=n.charCodeAt(a);return o}(e.src));else if(/^blob\:/i.test(e.src))(o=new FileReader).onload=function(e){n(e.target.result)},function(e,t){var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="blob",n.onload=function(e){200!=this.status&&0!==this.status||t(this.response)},n.send()}(e.src,(function(e){o.readAsArrayBuffer(e)}));else{var r=new XMLHttpRequest;r.onload=function(){200==this.status||0===this.status?n(r.response):t(new Error("Could not load image")),r=null},r.open("GET",e.src,!0),r.responseType="arraybuffer",r.send(null)}else if(window.FileReader&&(e instanceof window.Blob||e instanceof window.File)){var o;(o=new FileReader).onload=function(e){n(e.target.result)},o.readAsArrayBuffer(e)}}function l(e){var t=new DataView(e);if(255!=t.getUint8(0)||216!=t.getUint8(1))return!1;for(var n=2,r=e.byteLength;n<r;){if(255!=t.getUint8(n))return!1;if(225==t.getUint8(n+1))return g(t,n+4,t.getUint16(n+2));n+=2+t.getUint16(n+2)}}var d={120:"caption",110:"credit",25:"keywords",55:"dateCreated",80:"byline",85:"bylineTitle",122:"captionWriter",105:"headline",116:"copyright",15:"category"};function f(e,t,n){for(var r,o,i,a,c=new DataView(e),s={},u=t;u<t+n;)28===c.getUint8(u)&&2===c.getUint8(u+1)&&(a=c.getUint8(u+2))in d&&(i=c.getInt16(u+3),o=d[a],r=m(c,u+5,i),s.hasOwnProperty(o)?s[o]instanceof Array?s[o].push(r):s[o]=[s[o],r]:s[o]=r),u++;return s}function h(e,t,n,r,o){var i,a,c=e.getUint16(n,!o),s={};for(a=0;a<c;a++)i=n+12*a+2,s[r[e.getUint16(i,!o)]]=p(e,i,t,0,o);return s}function p(e,t,n,r,o){var i,a,c,s,u,l,d=e.getUint16(t+2,!o),f=e.getUint32(t+4,!o),h=e.getUint32(t+8,!o)+n;switch(d){case 1:case 7:if(1==f)return e.getUint8(t+8,!o);for(i=f>4?h:t+8,a=[],s=0;s<f;s++)a[s]=e.getUint8(i+s);return a;case 2:return m(e,i=f>4?h:t+8,f-1);case 3:if(1==f)return e.getUint16(t+8,!o);for(i=f>2?h:t+8,a=[],s=0;s<f;s++)a[s]=e.getUint16(i+2*s,!o);return a;case 4:if(1==f)return e.getUint32(t+8,!o);for(a=[],s=0;s<f;s++)a[s]=e.getUint32(h+4*s,!o);return a;case 5:if(1==f)return u=e.getUint32(h,!o),l=e.getUint32(h+4,!o),(c=new Number(u/l)).numerator=u,c.denominator=l,c;for(a=[],s=0;s<f;s++)u=e.getUint32(h+8*s,!o),l=e.getUint32(h+4+8*s,!o),a[s]=new Number(u/l),a[s].numerator=u,a[s].denominator=l;return a;case 9:if(1==f)return e.getInt32(t+8,!o);for(a=[],s=0;s<f;s++)a[s]=e.getInt32(h+4*s,!o);return a;case 10:if(1==f)return e.getInt32(h,!o)/e.getInt32(h+4,!o);for(a=[],s=0;s<f;s++)a[s]=e.getInt32(h+8*s,!o)/e.getInt32(h+4+8*s,!o);return a}}function m(e,t,n){var r,o="";for(r=t;r<t+n;r++)o+=String.fromCharCode(e.getUint8(r));return o}function g(e,t){if("Exif"!=m(e,t,4))return!1;var n,r,s,u,l,d=t+6;if(18761==e.getUint16(d))n=!1;else{if(19789!=e.getUint16(d))return!1;n=!0}if(42!=e.getUint16(d+2,!n))return!1;var f=e.getUint32(d+4,!n);if(f<8)return!1;if((r=h(e,d,d+f,i,n)).ExifIFDPointer)for(s in u=h(e,d,d+r.ExifIFDPointer,o,n)){switch(s){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":u[s]=c[s][u[s]];break;case"ExifVersion":case"FlashpixVersion":u[s]=String.fromCharCode(u[s][0],u[s][1],u[s][2],u[s][3]);break;case"ComponentsConfiguration":u[s]=c.Components[u[s][0]]+c.Components[u[s][1]]+c.Components[u[s][2]]+c.Components[u[s][3]]}r[s]=u[s]}if(r.GPSInfoIFDPointer)for(s in l=h(e,d,d+r.GPSInfoIFDPointer,a,n))"GPSVersionID"===s&&(l[s]=l[s][0]+"."+l[s][1]+"."+l[s][2]+"."+l[s][3]),r[s]=l[s];return r}n.getData=function(e,t){return!((e instanceof Image||e instanceof HTMLImageElement)&&!e.complete)&&(s(e)?t&&t.call(e):u(e,t),!0)},n.getTag=function(e,t){if(s(e))return e.exifdata[t]},n.getAllTags=function(e){if(!s(e))return{};var t,n=e.exifdata,r={};for(t in n)n.hasOwnProperty(t)&&(r[t]=n[t]);return r},n.pretty=function(e){if(!s(e))return"";var t,n=e.exifdata,r="";for(t in n)n.hasOwnProperty(t)&&("object"==typeof n[t]?n[t]instanceof Number?r+=t+" : "+n[t]+" ["+n[t].numerator+"/"+n[t].denominator+"]\r\n":r+=t+" : ["+n[t].length+" values]\r\n":r+=t+" : "+n[t]+"\r\n");return r},n.readFromBinaryFile=function(e){return l(e)},void 0===(r=function(){return n}.apply(t,[]))||(e.exports=r)}).call(this)},function(e,t,n){var r;!function(){function n(e,t,n,r){var o=e.naturalWidth,i=e.naturalHeight,a=n.width,c=n.height,s=t.getContext("2d");s.save(),function(e,t,n,r,o){switch(o){case 5:case 6:case 7:case 8:e.width=r,e.height=n;break;default:e.width=n,e.height=r}switch(o){case 2:t.translate(n,0),t.scale(-1,1);break;case 3:t.translate(n,r),t.rotate(Math.PI);break;case 4:t.translate(0,r),t.scale(1,-1);break;case 5:t.rotate(.5*Math.PI),t.scale(1,-1);break;case 6:t.rotate(.5*Math.PI),t.translate(0,-r);break;case 7:t.rotate(.5*Math.PI),t.translate(n,-r),t.scale(-1,1);break;case 8:t.rotate(-.5*Math.PI),t.translate(-n,0)}}(t,s,a,c,n.orientation);var u=function(e){var t=e.naturalWidth;if(t*e.naturalHeight>1048576){var n=document.createElement("canvas");n.width=n.height=1;var r=n.getContext("2d");return r.drawImage(e,1-t,0),0===r.getImageData(0,0,1,1).data[3]}return!1}(e);u&&(o/=2,i/=2);var l=1024,d=document.createElement("canvas");d.width=d.height=l;for(var f=d.getContext("2d"),h=r?function(e,t,n){var r=document.createElement("canvas");r.width=1,r.height=n;var o=r.getContext("2d");o.drawImage(e,0,0);for(var i=o.getImageData(0,0,1,n).data,a=0,c=n,s=n;s>a;)0===i[4*(s-1)+3]?c=s:a=s,s=c+a>>1;var u=s/n;return 0===u?1:u}(e,0,i):1,p=Math.ceil(l*a/o),m=Math.ceil(l*c/i/h),g=0,v=0;g<i;){for(var w=0,y=0;w<o;)f.clearRect(0,0,l,l),f.drawImage(e,-w,-g),s.drawImage(d,0,0,l,l,y,v,p,m),w+=l,y+=p;g+=l,v+=m}s.restore(),d=f=null}function o(e){if(window.Blob&&e instanceof Blob){var t=new Image,n=window.URL&&window.URL.createObjectURL?window.URL:window.webkitURL&&window.webkitURL.createObjectURL?window.webkitURL:null;if(!n)throw Error("No createObjectURL function found to create blob url");t.src=n.createObjectURL(e),this.blob=e,e=t}if(!e.naturalWidth&&!e.naturalHeight){var r=this;e.onload=function(){var e=r.imageLoadListeners;if(e){r.imageLoadListeners=null;for(var t=0,n=e.length;t<n;t++)e[t]()}},this.imageLoadListeners=[]}this.srcImage=e}o.prototype.render=function(e,t,r){if(this.imageLoadListeners){var o=this;this.imageLoadListeners.push((function(){o.render(e,t,r)}))}else{t=t||{};var i=this.srcImage,a=i.src,c=a.length,s=i.naturalWidth,u=i.naturalHeight,l=t.width,d=t.height,f=t.maxWidth,h=t.maxHeight,p=this.blob&&"image/jpeg"===this.blob.type||0===a.indexOf("data:image/jpeg")||a.indexOf(".jpg")===c-4||a.indexOf(".jpeg")===c-5;l&&!d?d=u*l/s<<0:d&&!l?l=s*d/u<<0:(l=s,d=u),f&&l>f&&(d=u*(l=f)/s<<0),h&&d>h&&(l=s*(d=h)/u<<0);var m={width:l,height:d};for(var g in t)m[g]=t[g];var v=e.tagName.toLowerCase();"img"===v?e.src=function(e,t,r){var o=document.createElement("canvas");return n(e,o,t,r),o.toDataURL("image/jpeg",t.quality||.8)}(this.srcImage,m,p):"canvas"===v&&n(this.srcImage,e,m,p),"function"===typeof this.onrender&&this.onrender(e),r&&r()}},void 0===(r=function(){return o}.apply(t,[]))||(e.exports=r)}()},function(e,t){e.exports=function(e){Math.round;var t,n,r,o,i,a=Math.floor,c=new Array(64),s=new Array(64),u=new Array(64),l=new Array(64),d=new Array(65535),f=new Array(65535),h=new Array(64),p=new Array(64),m=[],g=0,v=7,w=new Array(64),y=new Array(64),b=new Array(64),C=new Array(256),S=new Array(2048),x=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],E=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],P=[0,1,2,3,4,5,6,7,8,9,10,11],M=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],R=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],I=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],T=[0,1,2,3,4,5,6,7,8,9,10,11],D=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],O=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function L(e,t){for(var n=0,r=0,o=new Array,i=1;i<=16;i++){for(var a=1;a<=e[i];a++)o[t[r]]=[],o[t[r]][0]=n,o[t[r]][1]=i,r++,n++;n*=2}return o}function k(e){for(var t=e[0],n=e[1]-1;n>=0;)t&1<<n&&(g|=1<<v),n--,--v<0&&(255==g?(F(255),F(0)):F(g),v=7,g=0)}function F(e){m.push(C[e])}function A(e){F(e>>8&255),F(255&e)}function z(e,t,n,r,o){for(var i,a=o[0],c=o[240],s=function(e,t){var n,r,o,i,a,c,s,u,l,d,f=0;for(l=0;l<8;++l){n=e[f],r=e[f+1],o=e[f+2],i=e[f+3],a=e[f+4],c=e[f+5],s=e[f+6];var p=n+(u=e[f+7]),m=n-u,g=r+s,v=r-s,w=o+c,y=o-c,b=i+a,C=i-a,S=p+b,x=p-b,E=g+w,P=g-w;e[f]=S+E,e[f+4]=S-E;var M=.707106781*(P+x);e[f+2]=x+M,e[f+6]=x-M;var R=.382683433*((S=C+y)-(P=v+m)),I=.5411961*S+R,T=1.306562965*P+R,D=.707106781*(E=y+v),O=m+D,L=m-D;e[f+5]=L+I,e[f+3]=L-I,e[f+1]=O+T,e[f+7]=O-T,f+=8}for(f=0,l=0;l<8;++l){n=e[f],r=e[f+8],o=e[f+16],i=e[f+24],a=e[f+32],c=e[f+40],s=e[f+48];var k=n+(u=e[f+56]),F=n-u,A=r+s,z=r-s,Z=o+c,_=o-c,U=i+a,N=i-a,j=k+U,G=k-U,W=A+Z,B=A-Z;e[f]=j+W,e[f+32]=j-W;var H=.707106781*(B+G);e[f+16]=G+H,e[f+48]=G-H;var V=.382683433*((j=N+_)-(B=z+F)),X=.5411961*j+V,q=1.306562965*B+V,Y=.707106781*(W=_+z),Q=F+Y,K=F-Y;e[f+40]=K+X,e[f+24]=K-X,e[f+8]=Q+q,e[f+56]=Q-q,f++}for(l=0;l<64;++l)d=e[l]*t[l],h[l]=d>0?d+.5|0:d-.5|0;return h}(e,t),u=0;u<64;++u)p[x[u]]=s[u];var l=p[0]-n;n=p[0],0==l?k(r[0]):(k(r[f[i=32767+l]]),k(d[i]));for(var m=63;m>0&&0==p[m];m--);if(0==m)return k(a),n;for(var g,v=1;v<=m;){for(var w=v;0==p[v]&&v<=m;++v);var y=v-w;if(y>=16){g=y>>4;for(var b=1;b<=g;++b)k(c);y&=15}i=32767+p[v],k(o[(y<<4)+f[i]]),k(d[i]),v++}return 63!=m&&k(a),n}function Z(e){e<=0&&(e=1),e>100&&(e=100),i!=e&&(function(e){for(var t=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],n=0;n<64;n++){var r=a((t[n]*e+50)/100);r<1?r=1:r>255&&(r=255),c[x[n]]=r}for(var o=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],i=0;i<64;i++){var d=a((o[i]*e+50)/100);d<1?d=1:d>255&&(d=255),s[x[i]]=d}for(var f=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],h=0,p=0;p<8;p++)for(var m=0;m<8;m++)u[h]=1/(c[x[h]]*f[p]*f[m]*8),l[h]=1/(s[x[h]]*f[p]*f[m]*8),h++}(e<50?Math.floor(5e3/e):Math.floor(200-2*e)),i=e)}this.encode=function(e,i,a){(new Date).getTime();i&&Z(i),m=new Array,g=0,v=7,A(65496),A(65504),A(16),F(74),F(70),F(73),F(70),F(0),F(1),F(1),F(0),A(1),A(1),F(0),F(0),function(){A(65499),A(132),F(0);for(var e=0;e<64;e++)F(c[e]);F(1);for(var t=0;t<64;t++)F(s[t])}(),function(e,t){A(65472),A(17),F(8),A(t),A(e),F(3),F(1),F(17),F(0),F(2),F(17),F(1),F(3),F(17),F(1)}(e.width,e.height),function(){A(65476),A(418),F(0);for(var e=0;e<16;e++)F(E[e+1]);for(var t=0;t<=11;t++)F(P[t]);F(16);for(var n=0;n<16;n++)F(M[n+1]);for(var r=0;r<=161;r++)F(R[r]);F(1);for(var o=0;o<16;o++)F(I[o+1]);for(var i=0;i<=11;i++)F(T[i]);F(17);for(var a=0;a<16;a++)F(D[a+1]);for(var c=0;c<=161;c++)F(O[c])}(),A(65498),A(12),F(3),F(1),F(0),F(2),F(17),F(3),F(17),F(0),F(63),F(0);var d=0,f=0,h=0;g=0,v=7,this.encode.displayName="_encode_";for(var p,C,x,L,_,U,N,j,G,W=e.data,B=e.width,H=e.height,V=4*B,X=0;X<H;){for(p=0;p<V;){for(U=_=V*X+p,N=-1,j=0,G=0;G<64;G++)U=_+(j=G>>3)*V+(N=4*(7&G)),X+j>=H&&(U-=V*(X+1+j-H)),p+N>=V&&(U-=p+N-V+4),C=W[U++],x=W[U++],L=W[U++],w[G]=(S[C]+S[x+256>>0]+S[L+512>>0]>>16)-128,y[G]=(S[C+768>>0]+S[x+1024>>0]+S[L+1280>>0]>>16)-128,b[G]=(S[C+1280>>0]+S[x+1536>>0]+S[L+1792>>0]>>16)-128;d=z(w,u,d,t,r),f=z(y,l,f,n,o),h=z(b,l,h,n,o),p+=32}X+=8}if(v>=0){var q=[];q[1]=v+1,q[0]=(1<<v+1)-1,k(q)}if(A(65497),a){for(var Y=m.length,Q=new Uint8Array(Y),K=0;K<Y;K++)Q[K]=m[K].charCodeAt();return m=[],(new Date).getTime(),Q}var J="data:image/jpeg;base64,"+btoa(m.join(""));return m=[],(new Date).getTime(),J},(new Date).getTime(),e||(e=50),function(){for(var e=String.fromCharCode,t=0;t<256;t++)C[t]=e(t)}(),t=L(E,P),n=L(I,T),r=L(M,R),o=L(D,O),function(){for(var e=1,t=2,n=1;n<=15;n++){for(var r=e;r<t;r++)f[32767+r]=n,d[32767+r]=[],d[32767+r][1]=n,d[32767+r][0]=r;for(var o=-(t-1);o<=-e;o++)f[32767+o]=n,d[32767+o]=[],d[32767+o][1]=n,d[32767+o][0]=t-1+o;e<<=1,t<<=1}}(),function(){for(var e=0;e<256;e++)S[e]=19595*e,S[e+256>>0]=38470*e,S[e+512>>0]=7471*e+32768,S[e+768>>0]=-11059*e,S[e+1024>>0]=-21709*e,S[e+1280>>0]=32768*e+8421375,S[e+1536>>0]=-27439*e,S[e+1792>>0]=-5329*e}(),Z(e),(new Date).getTime()}},function(e,t,n){n.p=function(e){var t=null;return(t=e?[].filter.call(document.scripts,(function(t){return-1!==t.src.indexOf(e)}))[0]:document.scripts[document.scripts.length-1])?t.src.substr(0,t.src.lastIndexOf("/")):null}("lrz")+"/",window.URL=window.URL||window.webkitURL;var r=n(1),o=n(5),i=n(6),a=function(e){var t=/OS (.*) like Mac OS X/g.exec(e),n=/Android (\d.*?);/g.exec(e)||/Android\/(\d.*?) /g.exec(e),r=t?+t.pop().replace(/-/g,"."):0;return{oldIOS:!!t&&r<8,newIOS:!!t&&r>=13,oldAndroid:!!n&&+n.pop().substr(0,3)<4.5,iOS:/\(i[^;]+;( U;)? CPU.+Mac OS X/.test(e),android:/Android/g.test(e),mQQBrowser:/MQQBrowser/g.test(e)}}(navigator.userAgent);function c(e,t){var n=this;if(!e)throw new Error("\u6ca1\u6709\u6536\u5230\u56fe\u7247\uff0c\u53ef\u80fd\u7684\u89e3\u51b3\u65b9\u6848\uff1ahttps://github.com/think2011/localResizeIMG/issues/7");for(var r in t=t||{},n.defaults={width:null,height:null,fieldName:"file",ingnoreOrientation:!a.iOS||a.newIOS,quality:.7},n.file=e,t)t.hasOwnProperty(r)&&(n.defaults[r]=t[r]);return this.init()}c.prototype.init=function(){var e=this,t=e.file,n="string"===typeof t,i=/^data:/.test(t),a=new Image,c=document.createElement("canvas"),s=n?t:URL.createObjectURL(t);if(e.img=a,e.blob=s,e.canvas=c,e.fileName=n?i?"base64.jpg":t.split("/").pop():t.name,!document.createElement("canvas").getContext)throw new Error("\u6d4f\u89c8\u5668\u4e0d\u652f\u6301canvas");return new r((function(n,r){a.onerror=function(){var e=new Error("\u52a0\u8f7d\u56fe\u7247\u6587\u4ef6\u5931\u8d25");throw r(e),e},a.onload=function(){e._getBase64().then((function(e){if(e.length<10){var t=new Error("\u751f\u6210base64\u5931\u8d25");throw r(t),t}return e})).then((function(r){var i=null;for(var a in"object"===typeof e.file&&r.length>e.file.size?(i=new FormData,t=e.file):(i=new o.FormData,t=function(e){var t;t=e.split(",")[0].indexOf("base64")>=0?atob(e.split(",")[1]):unescape(e.split(",")[1]);for(var n=e.split(",")[0].split(":")[1].split(";")[0],r=new Uint8Array(t.length),i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return new o.Blob([r.buffer],{type:n})}(r)),i.append(e.defaults.fieldName,t,e.fileName.replace(/\..+/g,".jpg")),n({formData:i,fileLen:+t.size,base64:r,base64Len:r.length,origin:e.file,file:t}),e)e.hasOwnProperty(a)&&(e[a]=null);URL.revokeObjectURL(e.blob)}))},!i&&(a.crossOrigin="*"),a.src=s}))},c.prototype._getBase64=function(){var e=this,t=e.img,n=e.file,o=e.canvas;return new r((function(r){try{i.getData("object"===typeof n?n:t,(function(){e.orientation=e.defaults.ingnoreOrientation?0:i.getTag(this,"Orientation"),e.resize=e._getResize(),e.ctx=o.getContext("2d"),o.width=e.resize.width,o.height=e.resize.height,e.ctx.fillStyle="#fff",e.ctx.fillRect(0,0,o.width,o.height),a.oldIOS?e._createBase64ForOldIOS().then(r):e._createBase64().then(r)}))}catch(c){throw new Error(c)}}))},c.prototype._createBase64ForOldIOS=function(){var e=this,t=e.img,o=e.canvas,i=e.defaults,a=e.orientation;return new r((function(e){!function(){var r=[n(7)];(function(n){var r=new n(t);"5678".indexOf(a)>-1?r.render(o,{width:o.height,height:o.width,orientation:a}):r.render(o,{width:o.width,height:o.height,orientation:a}),e(o.toDataURL("image/jpeg",i.quality))}).apply(null,r)}()}))},c.prototype._createBase64=function(){var e=this,t=e.resize,o=e.img,i=e.canvas,c=e.ctx,s=e.defaults;switch(e.orientation){case 3:c.rotate(180*Math.PI/180),c.drawImage(o,-t.width,-t.height,t.width,t.height);break;case 6:c.rotate(90*Math.PI/180),c.drawImage(o,0,-t.width,t.height,t.width);break;case 8:c.rotate(270*Math.PI/180),c.drawImage(o,-t.height,0,t.height,t.width);break;case 2:c.translate(t.width,0),c.scale(-1,1),c.drawImage(o,0,0,t.width,t.height);break;case 4:c.translate(t.width,0),c.scale(-1,1),c.rotate(180*Math.PI/180),c.drawImage(o,-t.width,-t.height,t.width,t.height);break;case 5:c.translate(t.width,0),c.scale(-1,1),c.rotate(90*Math.PI/180),c.drawImage(o,0,-t.width,t.height,t.width);break;case 7:c.translate(t.width,0),c.scale(-1,1),c.rotate(270*Math.PI/180),c.drawImage(o,-t.height,0,t.height,t.width);break;default:c.drawImage(o,0,0,t.width,t.height)}return new r((function(e){a.oldAndroid||a.mQQBrowser||!navigator.userAgent?function(){var t=[n(8)];(function(t){var n=new t,r=c.getImageData(0,0,i.width,i.height);e(n.encode(r,100*s.quality))}).apply(null,t)}():e(i.toDataURL("image/jpeg",s.quality))}))},c.prototype._getResize=function(){var e=this,t=e.img,n=e.defaults,r=n.width,o=n.height,i=e.orientation,a={width:t.width,height:t.height};if("5678".indexOf(i)>-1&&(a.width=t.height,a.height=t.width),a.width<r||a.height<o)return a;var c=a.width/a.height;for(r&&o?c>=r/o?a.width>r&&(a.width=r,a.height=Math.ceil(r/c)):a.height>o&&(a.height=o,a.width=Math.ceil(o*c)):r?r<a.width&&(a.width=r,a.height=Math.ceil(r/c)):o&&o<a.height&&(a.width=Math.ceil(o*c),a.height=o);a.width>=3264||a.height>=2448;)a.width*=.8,a.height*=.8;return a},window.lrz=function(e,t){return new c(e,t)},window.lrz.version="__packageJSON.version__",e.exports=window.lrz}])},e.exports=t()},6272:function(e,t,n){e.exports=n(166)},4872:function(e){"use strict";var t=!("undefined"===typeof window||!window.document||!window.document.createElement),n={canUseDOM:t,canUseWorkers:"undefined"!==typeof Worker,canUseEventListeners:t&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:t&&!!window.screen,isInWorker:!t};e.exports=n},5811:function(e){var t,n,r,o,i,a,c,s,u,l,d,f,h,p,m,g=!1;function v(){if(!g){g=!0;var e=navigator.userAgent,v=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(e),w=/(Mac OS X)|(Windows)|(Linux)/.exec(e);if(f=/\b(iPhone|iP[ao]d)/.exec(e),h=/\b(iP[ao]d)/.exec(e),l=/Android/i.exec(e),p=/FBAN\/\w+;/i.exec(e),m=/Mobile/i.exec(e),d=!!/Win64/.exec(e),v){(t=v[1]?parseFloat(v[1]):v[5]?parseFloat(v[5]):NaN)&&document&&document.documentMode&&(t=document.documentMode);var y=/(?:Trident\/(\d+.\d+))/.exec(e);a=y?parseFloat(y[1])+4:t,n=v[2]?parseFloat(v[2]):NaN,r=v[3]?parseFloat(v[3]):NaN,(o=v[4]?parseFloat(v[4]):NaN)?(v=/(?:Chrome\/(\d+\.\d+))/.exec(e),i=v&&v[1]?parseFloat(v[1]):NaN):i=NaN}else t=n=r=i=o=NaN;if(w){if(w[1]){var b=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(e);c=!b||parseFloat(b[1].replace("_","."))}else c=!1;s=!!w[2],u=!!w[3]}else c=s=u=!1}}var w={ie:function(){return v()||t},ieCompatibilityMode:function(){return v()||a>t},ie64:function(){return w.ie()&&d},firefox:function(){return v()||n},opera:function(){return v()||r},webkit:function(){return v()||o},safari:function(){return w.webkit()},chrome:function(){return v()||i},windows:function(){return v()||s},osx:function(){return v()||c},linux:function(){return v()||u},iphone:function(){return v()||f},mobile:function(){return v()||f||h||l||m},nativeApp:function(){return v()||p},android:function(){return v()||l},ipad:function(){return v()||h}};e.exports=w},5780:function(e,t,n){"use strict";var r,o=n(4872);o.canUseDOM&&(r=document.implementation&&document.implementation.hasFeature&&!0!==document.implementation.hasFeature("","")),e.exports=function(e,t){if(!o.canUseDOM||t&&!("addEventListener"in document))return!1;var n="on"+e,i=n in document;if(!i){var a=document.createElement("div");a.setAttribute(n,"return;"),i="function"===typeof a[n]}return!i&&r&&"wheel"===e&&(i=document.implementation.hasFeature("Events.wheel","3.0")),i}},166:function(e,t,n){"use strict";var r=n(5811),o=n(5780);function i(e){var t=0,n=0,r=0,o=0;return"detail"in e&&(n=e.detail),"wheelDelta"in e&&(n=-e.wheelDelta/120),"wheelDeltaY"in e&&(n=-e.wheelDeltaY/120),"wheelDeltaX"in e&&(t=-e.wheelDeltaX/120),"axis"in e&&e.axis===e.HORIZONTAL_AXIS&&(t=n,n=0),r=10*t,o=10*n,"deltaY"in e&&(o=e.deltaY),"deltaX"in e&&(r=e.deltaX),(r||o)&&e.deltaMode&&(1==e.deltaMode?(r*=40,o*=40):(r*=800,o*=800)),r&&!t&&(t=r<1?-1:1),o&&!n&&(n=o<1?-1:1),{spinX:t,spinY:n,pixelX:r,pixelY:o}}i.getEventType=function(){return r.firefox()?"DOMMouseScroll":o("wheel")?"wheel":"mousewheel"},e.exports=i},9613:function(e){e.exports=function(e,t,n,r){var o=n?n.call(r,e,t):void 0;if(void 0!==o)return!!o;if(e===t)return!0;if("object"!==typeof e||!e||"object"!==typeof t||!t)return!1;var i=Object.keys(e),a=Object.keys(t);if(i.length!==a.length)return!1;for(var c=Object.prototype.hasOwnProperty.bind(t),s=0;s<i.length;s++){var u=i[s];if(!c(u))return!1;var l=e[u],d=t[u];if(!1===(o=n?n.call(r,l,d,u):void 0)||void 0===o&&l!==d)return!1}return!0}}}]);
//# sourceMappingURL=477.e95169d6.chunk.js.map